<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제2장 C External Procedure</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero External Procedure 안내서"/><link rel="up" href="index.html" title="Tibero External Procedure 안내서"/><link rel="prev" href="chapter_intro.html" title="제1장 External Procedure 소개"/><link rel="next" href="chapter_extproc_create.html" title="제3장 C External Procedure 생성"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제2장 C External Procedure</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chapter_intro.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chapter_extproc_create.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chapter_extproc"/>제2장 C External Procedure</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chapter_extproc.html#d5e433">2.1. 특징</a></span></dt><dt><span class="section"><a href="chapter_extproc.html#sect_c_ep_flow">2.2. 동작 과정</a></span></dt></dl></div>
  

  <p>본 장에서는 C External Procedure의 특징과 동작 과정을 설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e433"/>2.1. 특징</h2></div></div></div>
    

    <p>C External Procedure는 다음과 같은 특징이 있다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>특정 OS에서만 사용할 수 있다.</p>

        <p>Linux, AIX 64bits, HP_IA 64bits, SOLALIS 5.9 64bits, SOLALIS
        5.10 64bits에서만 사용 가능하다.</p>
      </li><li>
        <p>임의의 공유 라이브러리를 호출할 수 있다.</p>

        <p>C 프로그래밍 언어에서 동적으로 호출할 수 있는 공유 라이브러리를 작성하는 경우 C External
        Procedure를 이용하여 호출할 수 있다.</p>
      </li><li>
        <p><span>Tibero</span> 서버와 다른 메모리 영역에서 수행된다.</p>

        <p>사용자가 작성한 공유 라이브러리(이하 <span><strong class="guibutton">사용자 공유 라이브러리</strong></span>)는
        <span>Tibero</span> 서버의 프로세스(이하 서버 프로세스)가 아닌
        <span><strong class="guibutton"><span>tbEPA</span></strong></span>(<span>Tibero</span> C External Procedure
        Agent)<a id="d5e452" class="indexterm"/> 프로세스에 의해 동적으로 로드된다.<a id="d5e455" class="indexterm"/></p>

        <p><span>tbEPA</span> 프로세스의 메모리 영역에서 사용자 공유 라이브러리가 수행되므로,
        수행 중에 에러가 발생 하더라도 서버 프로세스에는 영향을 주지 않는다.</p>
      </li><li>
        <p>특권(Privilege)을 부여할 수 있다.</p>

        <p>사용자 공유 라이브러리는 서버 내의 PSM 개체 하나와 대응되므로, 기존에 PSM에 적용할 수 있는 특권을 부여할
        수 있다.</p>
      </li><li>
        <p>C External Procedure의 실행이 현재 트랜잭션에 포함된다.</p>

        <p><span>Tibero</span> 서버에서 클라이언트의 요청을 수행하는 중에 C
        External Procedure의 실행이 요청되면 <span>tbEPA</span> 프로세스는 그 요청을 처리해 줄 때까지 대기한다.</p>

        <p>C External Procedure는 현재 트랜잭션에 포함되어 실행되며, 실행 결과에 따라 현재 트랜잭션을 커밋
        또는 롤백시킬 수 있다.</p>
      </li><li>
        <p>Callback Service를 이용하여 현재 트랜잭션에 SQL 연산(Operation)을 수행할 수
        있다.</p>

        <p>C External Procedure는 현재 트랜잭션에 포함되어 실행되므로, 사용자가 CLI로 작성한 공유
        라이브러리 함수를 이용하여 현재 트랜잭션에 질의 또는 DML 등을 수행할 수 있다.</p>

        <p>이러한 기능을 수행하기 위해서는 <span>Tibero</span>에서 제공하는 <span><strong class="guibutton">Callback Service</strong></span>를 이용해야 한다.
        자세한 내용은 <a href="sect_extproc_using.html#sect_callback_service" title="4.2. Callback Service">“4.2. Callback Service”</a>를 참고한다.<a id="d5e475" class="indexterm"/></p>
      </li></ul></div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_c_ep_flow"/>2.2. 동작 과정</h2></div></div></div>
    

    <p>C External Procedure로 등록한 사용자 공유 라이브러리는 수행이 요청되는 순간에 동적으로 로드된다. 이
    역할은 서버 프로세스가 아닌 <span><strong class="guibutton"><span>tbEPA</span></strong></span> 프로세스가 담당한다.<a id="d5e482" class="indexterm"/></p>

    <p><span>tbEPA</span> 프로세스는 C External Procedure의 실행이 요청되면 서버
    프로세스로부터 자동으로 생성되며, 서버 프로세스로부터 공유 라이브러리를 호출하기 위한 여러 가지 정보(라이브러리의 위치, 호출할
    함수명, 파라미터 정보 등)를 받는다.</p>

    <p>그 다음 <span>tbEPA</span> 프로세스는 공유 라이브러리를 동적으로 로드하여 해당 함수를 찾고 사용자가
    입력한 파라미터 정보를 통해 함수를 실행시킨다. 만약 반환 값이나 출력 파라미터가 있을 경우 <span>tbEPA</span>
    프로세스는 서버 프로세스로 그 값을 전달한다. 이러한 모든 과정은 <span>Tibero</span>에서 자동으로 처리되므로, 사용자는 기존의 PSM 함수를 사용하는 것과 같이 애플리케이션 프로그램을 작성할 수
    있다.</p>

    <div class="literallayout"><p/></div>

    <p>다음은 C External Procedure의 동작 과정을 나타내는 그림이다.</p>

    <div class="figure"><a id="figure_extproc_concept"/><p class="title"><b>[그림 2.1] C External Procedure의 동작 과정</b></p><div class="figure-contents">
      

      <div xmlns="" class="mediaobject" align="left"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="600"><tr><td align="left"><img src="resources/img_extproc_01.png" align="top" width="600" alt="C External Procedure의 동작 과정"/></td></tr></table></div>
    </div></div><br class="figure-break"/>

    <p><a href="chapter_extproc.html#figure_extproc_concept" title="[그림 2.1] C External Procedure의 동작 과정">[그림 2.1]</a>를 기준으로 C External
    Procedure가 동작하는 세부 과정은 다음과 같다.</p>

    <div class="orderedlist"><ol type="1" compact="compact"><li>
        <p>사용자는 자신이 직접 작성한 사용자 공유 라이브러리(user shared library)를 미리 PSM 개체 하나와
        대응시킨다.</p>
      </li><li>
        <p>사용자가 작성한 애플리케이션 프로그램(Client application)에서 사용자 공유 라이브러리에 대한 실행
        요청이 있는 경우 <span>Tibero</span> 서버의 엔진(Engine) 내의 PSM 모듈에서 실행해야
        할 해당 라이브러리가 외부에 있음을 확인하고 External Process를 실행시킨다.</p>
      </li><li>
        <p>2번 과정을 통해 동적으로 로드된 <span>tbEPA</span> 프로세스에 해당 라이브러리의 정보(라이브러리의 위치, 호출할
        함수명, 파라미터 정보 등)을 전달하고, 처리 결과를 기다린다.</p>
      </li><li>
        <p><span>tbEPA</span> 프로세스는 특정 라이브러리를 동적으로 로드하여 함수를 호출하고, 그
        결과를 서버로 보낸다.</p>
      </li><li>
        <p>서버는 <span>tbEPA</span> 프로세스로부터 받은 결과를 분석하여 사용자가 작성한 애플리케이션
        프로그램으로 전달한다.</p>
      </li><li>
        <p><span>tbEPA</span> 프로세스는 해당 세션이 종료될 때 자동으로 종료된다.</p>
      </li></ol></div>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chapter_intro.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chapter_extproc_create.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제1장 External Procedure 소개 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제3장 C External Procedure 생성</td></tr></table></div><div xmlns="" align="center"/></body></html>