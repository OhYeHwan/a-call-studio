<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제29장 DBMS_REPAIR</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="up" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="prev" href="chap_dbms_redefinition.html" title="제28장 DBMS_REDEFINITION"/><link rel="next" href="chap_dbms_resource_manager.html" title="제30장 DBMS_RESOURCE_MANAGER"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제29장 DBMS_REPAIR</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap_dbms_redefinition.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chap_dbms_resource_manager.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chap_dbms_repair"/>제29장 DBMS_REPAIR</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chap_dbms_repair.html#d5e11227">29.1. 개요</a></span></dt><dt><span class="section"><a href="chap_dbms_repair.html#d5e11250">29.2. 함수</a></span></dt><dd><dl><dt><span class="section"><a href="chap_dbms_repair.html#DBMS_REPAIR_ONLINE_INDEX_CLEAN">29.2.1. ONLINE_INDEX_CLEAN</a></span></dt></dl></dd></dl></div>
  

  <p>본 장에서는 DBMS_REPAIR 패키지의 기본 개념과 패키지 내의 프러시저를 사용하는 방법을 설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e11227"/>29.1. 개요</h2></div></div></div>
    

    <p><span><strong class="guibutton">DBMS_REPAIR</strong></span><a id="d5e11231" class="indexterm"/>는 테이블과 인덱스 내의 깨진 블록을 검사하고 복구하는 기능을 제공하는 패키지이다.</p>

    <p>다음은 DBMS_REPAIR 패키지 내에 정의된 상수<a id="d5e11235" class="indexterm"/>이다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>ALL_INDEX_ID</p>

        <p>인덱스의 스키마 객체 ID를 지정할 때 사용하며, 모든 인덱스에 대해 클린업을 수행하도록 지정한다.</p>

        <pre class="programlisting">ALL_INDEX_ID CONSTANT BINARY_INTEGER := 0</pre>
      </li><li>
        <p>LOCK_NOWAIT</p>

        <p>관련된 테이블, 파티션 또는 서브파티션에 대한 DML LOCK을 NOWAIT 모드로 요청한다.</p>

        <pre class="programlisting">LOCK_NOWAIT CONSTANT BOOLEAN := true</pre>
      </li><li>
        <p>LOCK_WAIT</p>

        <p>관련된 테이블, 파티션 또는 서브파티션에 대한 DML LOCK을 WAIT 모드로 요청한다.</p>

        <pre class="programlisting">LOCK_NOWAIT CONSTANT BOOLEAN := false</pre>
      </li></ul></div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e11250"/>29.2. 함수</h2></div></div></div>
    

    <p>본 절에서는 DBMS_REPAIR 패키지에서 제공하는 함수를 알파벳 순으로 설명한다.</p>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REPAIR_ONLINE_INDEX_CLEAN"/>29.2.1. ONLINE_INDEX_CLEAN<a id="d5e11255" class="indexterm"/></h3></div></div></div>
      

      <p>실패하거나 중단된 인덱스 online-build 또는 online-rebuild에 대한 클린업을 수행한다.</p>

      <div class="literallayout"><p/></div>

      <p>ONLINE_INDEX_CLEAN 함수<a id="d5e11261" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">DBMS_REPAIR.ONLINE_INDEX_CLEAN
(
    object_id       IN  BINARY_INTEGER  DEFAULT ALL_INDEX_ID,
    wait_for_lock   IN  BOOLEAN         DEFAULT LOCK_WAIT
)  
RETURN BOOLEAN;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">object_id</td><td>클린업을 수행할 인덱스의 스키마 객체 ID이다. ALL_INDEX_ID 상수로 지정할 경우 모든
                  인덱스에 대해 클린업을 수행한다.</td></tr><tr><td align="left">wait_for_lock</td><td><p>인덱스와 관련된 테이블, 파티션 또는 서브파티션에 대한 DML LOCK을 요청할 때의
                  LOCK 모드이다.</p><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>LOCK_NOWAIT 상수로 설정할 경우 LOCK을 얻는 데 실패하면 클린업이 바로
                        중단된다.</p>
                      </li><li>
                        <p>LOCK_WAIT 상수로 설정할 경우 LOCK을 얻을 때까지 계속
                        기다린다.</p>
                      </li></ul></div></td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">반환값</th><th>설명</th></tr></thead><tbody><tr><td align="left">TRUE</td><td>지정된 모든 인덱스에 대해 클린업이 수행된 경우에 반환된다.</td></tr><tr><td align="left">FALSE</td><td>지정된 인덱스 중 하나 이상의 인덱스에 대한 클린업이 실패한 경우에 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <pre class="programlisting">DECLARE
    cleaned BOOLEAN;
BEGIN
    cleaned := false;
    WHILE cleaned = false
    LOOP
        cleaned := DBMS_REPAIR.ONLINE_INDEX_CLEAN(DBMS_REPAIR.ALL_INDEX_ID,
                                               DBMS_REPAIR.LOCK_WAIT);
        DBMS_LOCK.SLEEP(10);
    END LOOP;
EXCEPTION
    WHEN OTHERS THEN
    RAISE;
END;
/

PSM completed
SQL&gt; </pre>
        </li></ul></div>
    </div>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap_dbms_redefinition.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chap_dbms_resource_manager.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제28장 DBMS_REDEFINITION </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제30장 DBMS_RESOURCE_MANAGER</td></tr></table></div><div xmlns="" align="center"/></body></html>