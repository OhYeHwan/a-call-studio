<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제5장 Spatial 유틸리티</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero Spatial 참조 안내서"/><link rel="up" href="index.html" title="Tibero Spatial 참조 안내서"/><link rel="prev" href="chapter_04.html" title="제4장 Spatial 함수"/><link rel="next" href="idx.html" title="색인"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제5장 Spatial 유틸리티</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chapter_04.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="idx.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chapter_05"/>제5장 Spatial 유틸리티</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chapter_05.html#d5e5129">5.1. gisLoader</a></span></dt><dt><span class="section"><a href="chapter_05.html#d5e5195">5.2. tibero2shp</a></span></dt><dt><span class="section"><a href="chapter_05.html#d5e5275">5.3. shp2tibero</a></span></dt></dl></div>
  

  <p>본 장에서는 Tibero Spatial에서 제공하는 유틸리티인 gisLoader와 tibero2shp, shp2tibero의
  사용법에 대해서 기술한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e5129"/>5.1. gisLoader</h2></div></div></div>
    

    <p><span>Tibero</span> Spatial에서는 shapefile 형식으로 되어 있는 공간 데이터를
    Tibero로 적재하는 데 사용할 수 있는 <span><strong class="guibutton">gisLoader</strong></span>라는 독립 실행형 유틸리티를
    제공한다. <a id="d5e5134" class="indexterm"/></p>

    <p>gisLoader 유틸리티는 shapefile 형태로 되어 있는 파일의 데이터를 읽어들여서 tbLoader의 입력이 되는
    데이터 파일을 생성한다. 즉, 사용자는 먼저 gisLoader 유틸리티를 사용하여 shapefile을 tbLoader의 입력 파일로
    변환하게 되고, 그 다음 tbLoader를 사용해 최종적으로 공간 데이터를 Tibero에 적재할 수가 있게 된다.</p>

    <p>shapefile을 구성하는 .shp, .shx, .dbf 파일 중에서 .shx 파일은 gisLoader 유틸리티에서
    해석하지 않는다. 즉, 이 파일에 해당되는 shapefile 정보는 모두 유실된다. gisLoader에서 해석이 가능한
    shapefile의 shape type은 Null, Point, Polyline, Polygon, Multipoint로 한정된다. 이
    외의 shape type이 shapefile 내에 존재할 경우 gisLoader 유틸리티는 수행을 멈추고 에러를
    출력한다.</p>

    <p/>

    <div class="literallayout"><p/></div>

    <p>gisLoader가 생성하는 파일은 tbLoader의 입력 파일인 .ctl 파일과 .dat 파일이다(컨트롤 파일과 데이터
    파일). 다만 테이블을 생성할 수 있는 스키마 스크립트 등은 생성해주지 않는다. 그러므로 사용자는 생성된 컨트롤 파일의 내용을
    조회하여 이후 tbLoader를 수행할 때 데이터가 정상적으로 적재될 수 있는지를 먼저 확인해야 한다. 예를 들어 기존의 테이블이
    존재하지 않는 상태라면 데이터를 적재할 테이블을 미리 생성해 놓아야 한다.</p>

    <p>다음은 gisLoader에서 생성한 .ctl 파일의 예제이다.</p>

    <pre class="programlisting">LOAD DATA
     INFILE 'test_table.dat'
     LOGFILE 'test_table.log'
     BADFILE 'test_table.bad'
     APPEND
     INTO TABLE test_table
     FIELDS TERMINATED BY ','
      OPTIONALLY ENCLOSED BY '"'
     ESCAPED BY '\\'
     LINES TERMINATED BY '\n'
     LOBFILE LOAD PARTIALLY DELIMITED BY ';'
     GEOMETRY LOAD AS BLOB
     (ID, FIPSSTCO, TRACT2000, BLOCK2000, STFID, geom OUTFILE)    </pre>

    <p>적재할 테이블이 존재하지 않을 때 적재가 가능한 테이블은 다음의 create table 문을 통해 생성이
    가능하다.</p>

    <pre class="programlisting">create table test_table (ID number, FIPSSTCO number, TRACT2000 number, 
BLOCK2000 number, STFID number, geom GEOMETRY);</pre>

    <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
      <p>tbLoader의 자세한 사용법은 "Tibero 유틸리티 안내서"를 참고한다.</p>
    </div>

    <div class="literallayout"><p/></div>

    <p/>

    <p/>

    <h3><a id="d5e5152"/>사용법 </h3>

    <p>다음은 gisLoader의 사용법에 대한 설명이다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>사용법</p>

        <pre class="programlisting">gisLoader &lt;<span class="emphasis"><em>shapefile name</em></span>&gt; &lt;<span class="emphasis"><em>table name</em></span>&gt; &lt;idcol=<span class="emphasis"><em>newcolname</em></span>&gt; &lt;endian=<span class="emphasis"><em>big/little</em></span>&gt; 
&lt;multipolygon=<span class="emphasis"><em>Y|N</em></span>&gt;</pre>

        <div class="informaltable">
          <table border="1"><colgroup><col width="120" align="left"/><col/></colgroup><thead><tr><th align="left">항목</th><th>설명</th></tr></thead><tbody><tr><td align="left">shapefile name</td><td>이미 존재하는 .shp 파일의 파일 이름을 명시한다.</td></tr><tr><td align="left">table name</td><td>최종적으로 tbLoader를 통해 데이터를 적재하게 될 데이터베이스의 테이블 이름을
                명시한다.</td></tr><tr><td align="left">idcol</td><td>dbf 파일이 아닌 shp 파일의 record number를 이용하여 생성되는 컬럼의 이름을
                명시한다. 생략하면 새로 컬럼을 생성하지 않는다.</td></tr><tr><td align="left">endian</td><td><p>생성되는 Geometry type에서 사용될 endian 정보(big/little)를
                명시한다. </p><p>생략하면 해당 머신 endian 정보를 사용한다.</p></td></tr><tr><td align="left">multipolygon</td><td><p>.shp 파일의 Polygon type을 모두 multipolygon type으로
                변환한다.</p><p> Polygon type으로 변환하려면 N으로
                설정한다.</p></td></tr></tbody></table>
        </div>
      </li><li>
        <p>예제</p>

        <pre class="programlisting">gisLoader test.shp test_table idcol=pk endian=little multipolygon=N</pre>
      </li></ul></div>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e5195"/>5.2. tibero2shp</h2></div></div></div>
    

    <p><span>Tibero</span> Spatial에서는 데이터베이스에 직접 연결되어 테이블의
    GEOMETRY를 shapefile 형태로 저장 가능한 <span><strong class="guibutton">tibero2shp</strong></span>라는 독립 실행형
    유틸리티를 제공한다. <a id="d5e5200" class="indexterm"/></p>

    <p>tibero2shp 유틸리티는 Tibero 쿼리의 결과 GEOMETRY들을 export하여 shapefile을 생성한다.
    쿼리의 결과 GEOMETRY란 테이블의 GEOMETRY 컬럼을 select하거나, 컬럼을 인자로 받아 GEOMETRY를 반환하는
    GEOMETRY 함수의 반환값일 수 있다.</p>

    <p>Shapefile의 특성상 한 파일에 동일한 타입의 GEOMETRY만을 담을 수 있으므로, 테이블에서 shapefile에
    GEOMETRY를 적재할 쿼리의 결과가 일정한 타입의 GEOMETRY가 되어야한다.</p>

    <p>Shapefile에 적재가능한 GEOMETRY 타입으로는 POINT, MULTIPOINT, LINESTRING,
    MULTILINESTRING, POLYGON, MULTIPOLYGON이 있다. 적재될 GEOMETRY들의 타입이 POINT와
    MULTIPOINT인 경우, shapefile에서 POINT와 MULTIPOINT는 다른 타입으로 분류되므로 위 두 타입은 구분하여
    넣어야한다. LINESTRING이나 POLYGON은 각각 MULTILINESTRING과 MULTIPOLYGON과 함께 적재 될 수
    있다. LINESTRING이나 POLYGON 타입의 GEOMETRY들이 shapefile에 적재되는 경우에는 각각
    MULTILINESTRING, MULTIPOLYGON의 타입으로 쓰여진다.</p>

    <div class="literallayout"><p/></div>

    <h3><a id="d5e5208"/>사용법 </h3>

    <p>다음은 tibero2shp의 사용법에 대한 설명이다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>사용법</p>

        <pre class="programlisting">tibero2shp &lt;<span class="emphasis"><em>option</em></span>&gt;
        &lt;<span class="emphasis"><em>username</em></span>&gt;<span class="emphasis"><em>/</em></span>&lt;<span class="emphasis"><em>password</em></span>&gt;<span class="emphasis"><em>@</em></span>&lt;<span class="emphasis"><em>database name</em></span>&gt;
        &lt;<span class="emphasis"><em>query</em></span>&gt;        </pre>

        <div class="informaltable">
          <table border="1"><colgroup><col width="120" align="left"/><col/></colgroup><thead><tr><th align="left">항목</th><th>설명</th></tr></thead><tbody><tr><td align="left">option</td><td>tibero2shp에서 사용할 option을 명시한다.</td></tr><tr><td align="left">username</td><td>데이터베이스의 사용자 이름을 명시한다.</td></tr><tr><td align="left">password</td><td>데이터베이스의 사용자 비밀번호를 명시한다.</td></tr><tr><td align="left">database name</td><td>데이터베이스의 이름을 명시한다.</td></tr><tr><td align="left">query</td><td><p>shapefile에 적재할 GEOMETRY를 명시하는 쿼리를 입력한다.
                </p><p>shapefile의 특성상 동일한 타입의 GEOMETRY객체를 명시하는
                쿼리여야한다.</p></td></tr></tbody></table>
        </div>
      </li><li>
        <p>[options]</p>

        <div class="informaltable">
          <table border="1"><colgroup><col width="120" align="left"/><col/></colgroup><thead><tr><th align="left">항목</th><th>설명</th></tr></thead><tbody><tr><td align="left">-f, --file</td><td><p>생성할 shapefile의 파일 이름을 명시하여 설정한다. </p><p>입력한
                이름에 대한 .shp, .shx, .dbf 세가지의 파일이 생성된다. 생성할 shapefile의 경로를 입력할
                수 있다. </p><p>파일의 이름은 입력하고 경로를 입력하지 않을 시 명령을 실행한 경로에
                shapefile이 생성된다. -f 옵션을 사용하지 않을 경우 파일 이름은 shape가 기본값으로 설정된다.
                </p></td></tr><tr><td align="left">-g, --geom</td><td><p>테이블에 다수의 GEOMETRY 컬럼이 다수일 경우 shapefile로 변환할 컬럼을
                명시하여 설정한다. </p><p>GEOMETRY 컬럼이 다수인데 변환할 컬럼을 명시하지 않은 경우,
                geom 컬럼에 대해 변환하는 것이 기본으로 설정되어있다. </p></td></tr><tr><td align="left">-h, --help</td><td>도움말 화면을 출력한다.</td></tr></tbody></table>
        </div>
      </li><li>
        <p>예제</p>

        <pre class="programlisting">tibero2shp -f $TB_HOME/testshape tibero/tmax@tibero 
        "SELECT GEOM FROM GIS WHERE ST_GEOMETRYTYPE(GEOM)='POLYGON'"</pre>
      </li></ul></div>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e5275"/>5.3. shp2tibero</h2></div></div></div>
    

    <p><span>Tibero</span> Spatial에서는 shapefile 내용을 데이터베이스의 테이블에
    적재하는 <span><strong class="guibutton">shp2tibero</strong></span>라는 독립 실행형 유틸리티를 제공한다. <a id="d5e5280" class="indexterm"/></p>

    <p>shp2tibero 유틸리티는 shapefile의 내용에 해당하는 테이블을 생성한다.</p>

    <p>Shapefile이 가질 수 있는 GEOMETRY 타입으로는 POINT, MULTIPOINT, LINESTRING,
    MULTILINESTRING, POLYGON, MULTIPOLYGON이 있다.</p>

    <p/>

    <div class="literallayout"><p/></div>

    <p/>

    <p/>

    <h3><a id="d5e5290"/>사용법 </h3>

    <p>다음은 shp2tibero의 사용법에 대한 설명이다.</p>

    <p/>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>사용법</p>

        <pre class="programlisting">shp2tibero &lt;<span class="emphasis"><em>option</em></span>&gt;
        &lt;<span class="emphasis"><em>username</em></span>&gt;<span class="emphasis"><em>/</em></span>&lt;<span class="emphasis"><em>password</em></span>&gt;<span class="emphasis"><em>@</em></span>&lt;<span class="emphasis"><em>database name</em></span>&gt;
        &lt;<span class="emphasis"><em>shapefile</em></span>&gt;        </pre>

        <div class="informaltable">
          <table border="1"><colgroup><col width="120" align="left"/><col/></colgroup><thead><tr><th align="left">항목</th><th>설명</th></tr></thead><tbody><tr><td align="left">option</td><td>shp2tibero에서 사용할 option을 명시한다.</td></tr><tr><td align="left">username</td><td>데이터베이스의 사용자 이름을 명시한다.</td></tr><tr><td align="left">password</td><td>데이터베이스의 사용자 비밀번호를 명시한다.</td></tr><tr><td align="left">database name</td><td>데이터베이스의 이름을 명시한다.</td></tr><tr><td align="left">shapefile</td><td><p>이미 존재하는 .shp 파일의 파일 이름을 명시한다.</p></td></tr></tbody></table>
        </div>
      </li><li>
        <p>[options]</p>

        <div class="informaltable">
          <table border="1"><colgroup><col width="120" align="left"/><col/></colgroup><thead><tr><th align="left">항목</th><th>설명</th></tr></thead><tbody><tr><td align="left">-t, --table</td><td><p>shapefile을 변환할 테이블 명을 명시하여 설정한다. </p><p>-t
                옵션을 사용하지 않을 경우 생성될 테이블명은 shapefile명과 같게 설정된다. </p></td></tr><tr><td align="left">-f, --file</td><td><p>생성할 shapefile의 파일 이름을 명시하여 설정한다. </p><p>입력한
                이름에 대한 .shp, .shx, .dbf 3가지의 파일이 생성된다. </p><p>생성할
                shapefile의 경로를 입력할 수 있다. 파일의 이름은 입력하고 경로를 입력하지 않을 시 명령을 실행한
                경로에 shapefile이 생성된다. -f 옵션을 사용하지 않을 경우 파일 이름은 shape가 기본값으로
                설정된다. </p></td></tr><tr><td align="left">-d, --drop</td><td>생성할 테이블과 이름이 같은 테이블이 이미 있는 경우, 기존의 테이블의 삭제 여부를 설정한다. 이
                옵션을 활성화할 경우 기존의 테이블이 삭제되고 shapefile로부터 새로운 테이블이 생성된다. </td></tr><tr><td align="left">-i, --idcolumn</td><td><p>생성할 테이블의 id 컬럼을 생성하고, 이름을 설정한다. </p></td></tr><tr><td align="left">-e, --endian</td><td><p>생성되는 Geometry type에서 사용될 endian 정보(big/little)를
                명시한다. </p><p>생략하면 해당 머신 endian 정보를 사용한다. </p></td></tr><tr><td align="left">-p, --polygon</td><td>GEOMETRY 객체의 타입을 POLYGON에서 MULTIPOLYGON으로 변환할지를 설정한다. 이
                옵션을 활성화하면 POLYGON 타입을 MULTIPOLYGON으로 변환하지 않는다. </td></tr><tr><td align="left">-h, --help</td><td>도움말 화면을 출력한다.</td></tr></tbody></table>
        </div>
      </li><li>
        <p>예제</p>

        <pre class="programlisting">shp2tibero -t tablename tibero/tmax@tibero 
        testshape</pre>
      </li></ul></div>

    <p/>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chapter_04.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="idx.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제4장 Spatial 함수 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 색인</td></tr></table></div><div xmlns="" align="center"/></body></html>