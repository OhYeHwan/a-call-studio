<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제2장 ANYDATA</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="up" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="prev" href="ch01.html" title="제1장 패키지 소개"/><link rel="next" href="chap_dbms_alert.html" title="제3장 DBMS_ALERT"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제2장 ANYDATA</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch01.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chap_dbms_alert.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chap_anydata"/>제2장 ANYDATA</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chap_anydata.html#d5e785">2.1. 개요</a></span></dt><dt><span class="section"><a href="chap_anydata.html#d5e792">2.2. 메소드</a></span></dt><dd><dl><dt><span class="section"><a href="chap_anydata.html#ANYDATA_CONVERT">2.2.1. CONVERT</a></span></dt><dt><span class="section"><a href="chap_anydata.html#ANYDATA_GET">2.2.2. GET</a></span></dt><dt><span class="section"><a href="chap_anydata.html#ANYDATA_ACCESS">2.2.3. ACCESS</a></span></dt><dt><span class="section"><a href="chap_anydata.html#ANYDATA_GETTYPENAME">2.2.4. GETTYPENAME</a></span></dt></dl></dd></dl></div>
  

  <p>본 장에서는 ANYDATA 타입의 기본 개념과 메소드에 대하여 기술한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e785"/>2.1. 개요</h2></div></div></div>
    

    <p><span><strong class="guibutton">ANYDATA</strong></span><a id="d5e789" class="indexterm"/> 타입은 임의의 타입을 담을 수 있는 타입이다.</p>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e792"/>2.2. 메소드</h2></div></div></div>
    

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="ANYDATA_CONVERT"/>2.2.1. CONVERT<a id="d5e796" class="indexterm"/></h3></div></div></div>
      

      <p>임의의 타입을 입력으로 받아, ANYDATA 타입의 인스턴스를 생성한다.</p>

      <div class="literallayout"><p/></div>

      <p>CONVERT 메소드 시리즈<a id="d5e802" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p><pre class="programlisting">STATIC FUNCTION ConvertNumber(num IN NUMBER) 
       return AnyData;
STATIC FUNCTION ConvertDate(dat IN DATE) 
       return AnyData;
STATIC FUNCTION ConvertChar(c IN CHAR) 
       return AnyData;
STATIC FUNCTION ConvertVarchar(c IN VARCHAR) 
       return AnyData;
STATIC FUNCTION ConvertVarchar2(c IN VARCHAR2) 
       return AnyData;
STATIC FUNCTION ConvertRaw(r IN RAW) 
       return AnyData;
STATIC FUNCTION ConvertBlob(b IN BLOB) 
       return AnyData;
STATIC FUNCTION ConvertClob(c IN CLOB) 
       return AnyData;
STATIC FUNCTION ConvertTimestamp(ts IN TIMESTAMP_UNCONSTRAINED) 
       return AnyData;
STATIC FUNCTION ConvertTimestampTZ(ts IN TIMESTAMP_TZ_UNCONSTRAINED) 
       return AnyData;
STATIC FUNCTION ConvertTimestampLTZ(ts IN TIMESTAMP_LTZ_UNCONSTRAINED) 
       return AnyData;
STATIC FUNCTION ConvertIntervalYM(inv IN YMINTERVAL_UNCONSTRAINED) 
       return AnyData;
STATIC FUNCTION ConvertIntervalDS(inv IN DSINTERVAL_UNCONSTRAINED) 
       return AnyData;
STATIC FUNCTION ConvertNchar(nc IN NCHAR) 
       return AnyData;
STATIC FUNCTION ConvertNVarchar2(nc IN NVARCHAR2) 
       return AnyData;
STATIC FUNCTION ConvertNClob(nc IN NCLOB) 
       return AnyData;
STATIC FUNCTION ConvertBFloat(fl IN BINARY_FLOAT) 
       return AnyData;
STATIC FUNCTION ConvertBDouble(dbl IN BINARY_DOUBLE) 
       return AnyData;
STATIC FUNCTION ConvertObject(obj IN "&lt;object&gt;") 
       return AnyData;
STATIC FUNCTION ConvertCollection(col IN "&lt;collection&gt;") 
       return AnyData;    </pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">num, da, c, r, b, ts, inv, nc, fl, dbl, obj,
                  col</td><td><p>ANYDATA 타입으로 변환할 임의의 타입의 입력값이다.
                  </p><div class="itemizedlist"><ul type="circle" compact="compact"><li style="list-style-type: circle">
                        <p>obj는 사용자가 정의한 임의의 object 타입이 가능하다.</p>
                      </li><li style="list-style-type: circle">
                        <p>col은 ddl로 생성한 전역 콜렉션 타입만 가능하다.</p>
                      </li></ul></div></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">declare
    var sys.anydata;
    nvar number := 10;
begin
    var := sys.anydata.convertNumber(nvar);
end;
/


create or replace type SIMPLE_OBJ is object ( c1 number, c2 number);
/

declare
     v1 SIMPLE_OBJ;
     result sys.anydata;
begin
     v1 := SIMPLE_OBJ (10, 20);

     result := sys.anydata.convertobject(v1);
end;
/

create or replace type SIMPLE_COLL  as table of varchar(128);
/

declare
   any1 sys.anydata;
   any2 sys.anydata;

   type LOCAL_COLL is table of varchar(128);
   var1 SIMPLE_COLL ;
   var2 LOCAL_COLL;

   res1 SIMPLE_COLL ;
   status pls_integer;
begin
    var1 := SIMPLE_COLL ('a', 'b');
    any1 := sys.anydata.convertCollection(var1);

    begin
        var2 := LOCAL_COLL('a', 'b');
        any2 := sys.anydata.convertCollection(var2);
    exception when dbms_types.incorrect_usage then
        dbms_output.put_line('Anydata does not support local collection type');
    end;

end;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="ANYDATA_GET"/>2.2.2. GET<a id="d5e832" class="indexterm"/></h3></div></div></div>
      

      <p>ANYDATA 타입 인스턴스를 임의의 타입으로 변환한다. 리턴값은 성공했을 때 DBMS_TYPES.SUCCESS를
      리턴한다.</p>

      <div class="literallayout"><p/></div>

      <p>GET 메소드 시리즈<a id="d5e838" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p><pre class="programlisting">MEMBER FUNCTION GetNumber(self IN AnyData, num OUT NOCOPY NUMBER) 
       return PLS_INTEGER;
MEMBER FUNCTION GetDate(self IN AnyData, dat OUT NOCOPY DATE) 
       return PLS_INTEGER;
MEMBER FUNCTION GetChar(self IN AnyData, c OUT NOCOPY CHAR) 
       return PLS_INTEGER;
MEMBER FUNCTION GetVarchar(self IN AnyData, c OUT NOCOPY VARCHAR) 
       return PLS_INTEGER;
MEMBER FUNCTION GetVarchar2(self IN AnyData, c OUT NOCOPY VARCHAR2) 
       return PLS_INTEGER;
MEMBER FUNCTION GetRaw(self IN AnyData, r OUT NOCOPY RAW) 
       return PLS_INTEGER;
MEMBER FUNCTION GetBlob(self IN AnyData, b OUT NOCOPY BLOB) 
       return PLS_INTEGER;
MEMBER FUNCTION GetClob(self IN AnyData, c OUT NOCOPY CLOB) 
       return PLS_INTEGER;
MEMBER FUNCTION GetTimestamp(self IN AnyData, 
       ts OUT NOCOPY TIMESTAMP_UNCONSTRAINED) return PLS_INTEGER;
MEMBER FUNCTION GetTimestampTZ(self IN AnyData, 
       ts OUT NOCOPY TIMESTAMP_TZ_UNCONSTRAINED) return PLS_INTEGER;
MEMBER FUNCTION GetTimestampLTZ(self IN AnyData, 
       ts OUT NOCOPY TIMESTAMP_LTZ_UNCONSTRAINED) return PLS_INTEGER;
MEMBER FUNCTION GetIntervalYM(self IN AnyData, 
       inv IN OUT NOCOPY YMINTERVAL_UNCONSTRAINED) return PLS_INTEGER;
MEMBER FUNCTION GetIntervalDS(self IN AnyData, 
       inv IN OUT NOCOPY DSINTERVAL_UNCONSTRAINED) return PLS_INTEGER;
MEMBER FUNCTION GetNchar(self IN AnyData, nc OUT NOCOPY NCHAR) 
       return PLS_INTEGER;
MEMBER FUNCTION GetNVarchar2(self IN AnyData, nc OUT NOCOPY NVARCHAR2) 
       return PLS_INTEGER;
MEMBER FUNCTION GetNClob(self IN AnyData, nc OUT NOCOPY NCLOB) 
       return PLS_INTEGER;
MEMBER FUNCTION GetBFloat(self IN AnyData, fl OUT NOCOPY BINARY_FLOAT) 
       return PLS_INTEGER;
MEMBER FUNCTION GetBDouble(self IN AnyData, dbl OUT NOCOPY BINARY_DOUBLE) 
       return PLS_INTEGER;
MEMBER FUNCTION GetCollection(self IN AnyData, obj OUT NOCOPY "&lt;collection&gt;") 
       return PLS_INTEGER;
MEMBER FUNCTION GetObject(self IN AnyData, obj OUT NOCOPY "&lt;object&gt;") 
       return PLS_INTEGER;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">self</td><td>ANYDATA 타입 인스턴스 자신이다. 자신의 값은 변경되지 않는다.</td></tr><tr><td align="left">num, da, c, r, b, ts, inv, nc, fl, dbl, obj,
                  col</td><td>ANYDATA 타입에서 꺼내올 변수이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 상황</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">예외 상황</th><th>설명</th></tr></thead><tbody><tr><td align="left">DBMS_TYPES.TYPE_MISMATCH</td><td>생성했던 타입과 다른 타입으로 GET*을 호출하는 경우 발생한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <pre class="programlisting">declare
    var sys.anydata;
    nvar number := 10;
    rvar number;
    status pls_integer;
begin
    var := sys.anydata.convertNumber(nvar);
    status := var.getnumber(rvar);
    dbms_output.put_line( rvar );
end;
/

declare
     v1 SIMPLE_OBJ;
     v2 SIMPLE_OBJ;
     result sys.anydata;
     flags pls_integer;
begin
     v1 := SIMPLE_OBJ (10, 20);

     result := sys.anydata.convertobject(v1);

     flags := result.getobject(v2);

     dbms_output.put_line (v2.c1);
     dbms_output.put_line (v2.c2);
end;
/

declare
   any1 sys.anydata;

   var1 SIMPLE_COLL ;
   res1 SIMPLE_COLL ;
   status pls_integer;
begin
   var1 := SIMPLE_COLL ('a', 'b');
   any1 := sys.anydata.convertCollection(var1);
   status := any1.getcollection(res1);
   dbms_output.put_line(res1(1));
   dbms_output.put_line(res1(2));
end;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="ANYDATA_ACCESS"/>2.2.3. ACCESS<a id="d5e878" class="indexterm"/></h3></div></div></div>
      

      <p>ANYDATA 타입 인스턴스를 임의의 타입으로 변환한다. 예외가 발생하지 않으며, 잘못된 타입으로 연산한 경우 GET
      시리즈와 달리 NULL을 리턴한다.</p>

      <div class="literallayout"><p/></div>

      <p>ACCESS 메소드 시리즈<a id="d5e884" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p><pre class="programlisting">MEMBER FUNCTION AccessNumber(self IN AnyData) 
       return NUMBER DETERMINISTIC;
MEMBER FUNCTION AccessDate(self IN AnyData) 
       return DATE DETERMINISTIC;
MEMBER FUNCTION AccessChar(self IN AnyData) 
       return CHAR DETERMINISTIC;
MEMBER FUNCTION AccessVarchar(self IN AnyData) 
       return VARCHAR DETERMINISTIC;
MEMBER FUNCTION AccessVarchar2(self IN AnyData) 
       return VARCHAR2 DETERMINISTIC;
MEMBER FUNCTION AccessRaw(self IN AnyData) 
       return RAW DETERMINISTIC;
MEMBER FUNCTION AccessBlob(self IN AnyData) 
       return BLOB DETERMINISTIC;
MEMBER FUNCTION AccessClob(self IN AnyData) 
       return CLOB DETERMINISTIC;
MEMBER FUNCTION AccessTimestamp(self IN AnyData)
       return TIMESTAMP_UNCONSTRAINED DETERMINISTIC;
MEMBER FUNCTION AccessTimestampTZ(self IN AnyData)
       return TIMESTAMP_TZ_UNCONSTRAINED DETERMINISTIC;
MEMBER FUNCTION AccessTimestampLTZ(self IN AnyData)
       return TIMESTAMP_LTZ_UNCONSTRAINED DETERMINISTIC;
MEMBER FUNCTION AccessIntervalYM(self IN AnyData)
       return YMINTERVAL_UNCONSTRAINED DETERMINISTIC;
MEMBER FUNCTION AccessIntervalDS(self IN AnyData) 
       return DSINTERVAL_UNCONSTRAINED DETERMINISTIC;
MEMBER FUNCTION AccessNchar(self IN AnyData) 
       return NCHAR DETERMINISTIC;
MEMBER FUNCTION AccessNVarchar2(self IN AnyData) 
       return NVARCHAR2 DETERMINISTIC;
MEMBER FUNCTION AccessBFloat(self IN AnyData) 
       return BINARY_FLOAT DETERMINISTIC;
MEMBER FUNCTION AccessBDouble(self IN AnyData) 
       return BINARY_DOUBLE DETERMINISTIC;
</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">self</td><td>ANYDATA 타입 인스턴스 자신이다. 자신의 값은 변경되지 않는다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <pre class="programlisting">declare
    var sys.anydata;
    nvar number := 10;
    rvar number;
    status pls_integer;
begin
    var := sys.anydata.convertNumber(nvar);
    dbms_output.put_line( var.accessnumber );
    dbms_output.put_line( var.accessvarchar ); -- null 출력

end;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="ANYDATA_GETTYPENAME"/>2.2.4. GETTYPENAME<a id="d5e908" class="indexterm"/></h3></div></div></div>
      

      <p>ANYDATA 타입에서 타입이름을 반환한다.</p>

      <div class="literallayout"><p/></div>

      <p>GETTYPENAME 메소드<a id="d5e914" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p><pre class="programlisting">MEMBER FUNCTION GetTypeName(self IN AnyData) return VARCHAR;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">self</td><td>ANYDATA 타입 인스턴스 자신이다. 자신의 값은 변경되지 않는다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <pre class="programlisting"> create or replace type SIMPLE_COLL  as table of varchar(128);
/

create or replace type SIMPLE_OBJ is object ( c1 number, c2 number);
/

declare
    var1 sys.anydata;
    var2 sys.anydata;
    var3 sys.anydata;
    num number := 10;
    obj SIMPLE_OBJ;
    coll SIMPLE_COLL;
begin
    obj := SIMPLE_OBJ (10, 20);
    coll := SIMPLE_COLL('a', 'b');
    var1 := sys.anydata.convertNumber(num);
    var2 := sys.anydata.convertobject(obj);
    var3 := sys.anydata.convertCollection(coll);
    dbms_output.put_line(var1.gettypename );
    dbms_output.put_line(var2.gettypename );
    dbms_output.put_line(var3.gettypename );
end;
/
</pre>
        </li></ul></div>
    </div>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch01.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chap_dbms_alert.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제1장 패키지 소개 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제3장 DBMS_ALERT</td></tr></table></div><div xmlns="" align="center"/></body></html>