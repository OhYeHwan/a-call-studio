<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제28장 DBMS_REDEFINITION</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="up" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="prev" href="chap_dbms_redact.html" title="제27장 DBMS_REDACT"/><link rel="next" href="chap_dbms_repair.html" title="제29장 DBMS_REPAIR"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제28장 DBMS_REDEFINITION</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap_dbms_redact.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chap_dbms_repair.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chap_dbms_redefinition"/>제28장 DBMS_REDEFINITION</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chap_dbms_redefinition.html#d5e10743">28.1. 개요</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#d5e10753">28.2. 제약사항</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#d5e10783">28.3. 프러시저</a></span></dt><dd><dl><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_ABORT_REDEF_TABLE">28.3.1. ABORT_REDEF_TABLE</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_CAN_REDEF_TABLE">28.3.2. CAN_REDEF_TABLE</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_COPY_TABLE_DEPENDENTS">28.3.3. COPY_TABLE_DEPENDENTS</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_FINISH_REDEF_TABLE">28.3.4. FINISH_REDEF_TABLE</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_REGISTER_DEPENDENT_OBJECT">28.3.5. REGISTER_DEPENDENT_OBJECT</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_START_REDEF_TABLE">28.3.6. START_REDEF_TABLE</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_SYNC_INTERIM_TABLE">28.3.7. SYNC_INTERIM_TABLE</a></span></dt><dt><span class="section"><a href="chap_dbms_redefinition.html#DBMS_REDEFINITION_UNREGISTER_DEPENDENT_OBJECT">28.3.8. UNREGISTER_DEPENDENT_OBJECT</a></span></dt></dl></dd></dl></div>
  

  <p>본 장에서는 DBMS_REDEFINITION 패키지의 기본 개념과 패키지 내의 프러시저를 사용하는 방법을
  설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e10743"/>28.1. 개요</h2></div></div></div>
    

    <p><span><strong class="guibutton">DBMS_REDEFINITION</strong></span><a id="d5e10747" class="indexterm"/>은 온라인 상태에서 특정 테이블을 재정의<a id="d5e10750" class="indexterm"/>하기 위한 프러시저를 제공하는 패키지이다.</p>

    <p>재정의할 대상인 원본 테이블을 지정된 컬럼 대응 정보에 따라 새 테이블로 재정의할 수 있다. 새 테이블은 재정의 수행
    이전에 미리 생성되어 있어야 하며, 재정의가 끝나면 원본 테이블의 구조와 새 테이블의 구조가 서로 바뀐다.</p>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e10753"/>28.2. 제약사항</h2></div></div></div>
    

    <p>현재 재정의를 지원하지 않는 원본 테이블 스펙은 다음과 같다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>options_flag == 1일 때(PK 옵션), PK가 존재하지 않는 경우</p>
      </li><li>
        <p>실체화 뷰가 정의되어 있는 경우</p>
      </li><li>
        <p>전역 임시 테이블인 경우</p>
      </li><li>
        <p>SYS 계정 소유의 테이블인 경우</p>
      </li><li>
        <p>Virtual 테이블인 경우</p>
      </li><li>
        <p>외부 테이블인 경우</p>
      </li><li>
        <p>Read-only인 경우</p>
      </li><li>
        <p>XML index 내부 테이블인 경우</p>
      </li><li>
        <p>CTXCAT index 내부 테이블인 경우</p>
      </li><li>
        <p>IOT 테이블이고 options_flag == 2 (ROWID 옵션)인 경우</p>
      </li><li>
        <p>VPD가 걸려있는 경우</p>
      </li><li>
        <p>이미 재정의 중인 테이블인 경우</p>
      </li><li>
        <p>특정 파티션에 대해 재정의할 때 lob 컬럼이 있는 경우</p>
      </li></ul></div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e10783"/>28.3. 프러시저</h2></div></div></div>
    

    <p>본 절에서는 DBMS_REDEFINITION 패키지에서 제공하는 프러시저를 알파벳 순으로 설명한다.</p>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_ABORT_REDEF_TABLE"/>28.3.1. ABORT_REDEF_TABLE<a id="d5e10788" class="indexterm"/></h3></div></div></div>
      

      <p>온라인 테이블 재정의를 취소하는 프러시저이다. 이 프러시저에 원본 테이블과 새 테이블의 이름을 지정하면, 온라인
      테이블을 재정의하기 위해 생성한 내부 객체는 제거되고 재정의가 취소된다. 이때 원본 테이블과 새 테이블은 취소 시점의 상태로
      남는다.</p>

      <div class="literallayout"><p/></div>

      <p>ABORT_REDEF_TABLE 프러시저<a id="d5e10794" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE ABORT_REDEF_TABLE 
(
    uname IN VARCHAR2, 
    orig_table IN VARCHAR2,
    int_table IN VARCHAR2,
    part_name IN VARCHAR2 DEFAULT NULL
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>원본 테이블과 새 테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">orig_table</td><td>원본 테이블의 이름이다.</td></tr><tr><td align="left">int_table</td><td>새 테이블의 이름이다.</td></tr><tr><td align="left">part_name</td><td><p>재정의 중인 파티션의 이름이다. 한 테이블의 단 하나의 파티션이 재정의 중일 경우에는
                  파티션의 이름을 해당 파라미터로 명시해야 한다. </p><p>NULL은 전체 테이블이 재정의
                  중이라는 것을 의미한다.</p><p>테이블의 여러 파티션이 재정의 중일 경우에는 각 파티션 이름을
                  콤마로 구분해서 명시한다.</p></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">BEGIN
    DBMS_REDEFINITION.ABORT_REDEF_TABLE('<span>TIBERO</span>', 'ORIG_TABLE', 'INT_TABLE');
END; /</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_CAN_REDEF_TABLE"/>28.3.2. CAN_REDEF_TABLE<a id="d5e10832" class="indexterm"/></h3></div></div></div>
      

      <p>온라인 테이블 재정의가 가능한지 확인하는 프러시저이다. 이 테이블에 테이블 이름과 옵션을 주면 온라인 테이블 재정의가
      가능한지 확인한 후, 가능하지 않은 경우 에러를 발생시킨다.</p>

      <div class="literallayout"><p/></div>

      <p>CAN_REDEF_TABLE 프러시저의 세부 내용은 다음과 같다.<a id="d5e10838" class="indexterm"/></p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE CAN_REDEF_TABLE 
(
    uname IN VARCHAR2, 
    tname IN VARCHAR12,
    options_flag IN BINARY_INTEGER := 1, 
    part_name IN VARCHAR2 := NULL
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">tname</td><td>온라인 테이블 재정의가 가능한지 확인할 테이블의 이름이다.</td></tr><tr><td align="left">options_flag</td><td><p>원본 테이블에서 새 테이블로 데이터를 옮길 때 어떤 정보를 사용할 것인지를
                  지정한다.</p><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>cons_use_pk : 기본 키의 정보를 사용한다. (지정하지 않을 경우
                        기본값)</p>
                      </li><li>
                        <p>cons_use_rowid : ROWID를 사용한다.</p>
                      </li></ul></div></td></tr><tr><td align="left">part_name</td><td><p>재정의할 파티션의 이름이다. 한 테이블의 단 하나의 파티션을 재정의하는 경우에는
                  파티션의 이름을 해당 파라미터로 명시해야 한다. </p><p>NULL은 전체 테이블이 재정의된다는
                  것을 의미한다.</p><p>테이블의 여러 파티션을 재정의하는 경우에는 각 파티션 이름을 콤마로
                  구분해서 명시한다.</p></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <pre class="programlisting">CREATE TABLE T1 (A NUMBER PRIMARY KEY);
BEGIN
    DBMS_REDEFINITION.CAN_REDEF_TABLE('<span>TIBERO</span>', 'T1');
END; /</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_COPY_TABLE_DEPENDENTS"/>28.3.3. COPY_TABLE_DEPENDENTS<a id="d5e10883" class="indexterm"/></h3></div></div></div>
      

      <p>테이블을 온라인 재정의를 수행하면서, 테이블과 관련된 다른 객체들도 복사해주는 프러시저이다. 인덱스, 제약사항,
      트리거, 권한 등에 대해서 기존 테이블의 관련 객체를 새 테이블에 복사해 줄지 파라미터로 명시할 수 있다.</p>

      <div class="literallayout"><p/></div>

      <p>COPY_TABLE_DEPENDENTS 프러시저의 세부 내용은 다음과 같다.<a id="d5e10889" class="indexterm"/></p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE COPY_TABLE_DEPENDENTS 
( 
    uname IN VARCHAR2, 
    orig_table IN VARCHAR2,
    int_table IN VARCHAR2,
    copy_indexes IN PLS_INTEGER := 1,
    copy_triggers IN BOOLEAN := TRUE,
    copy_constraints IN BOOLEAN := TRUE,
    copy_privileges IN BOOLEAN := TRUE, 
    ignore_errors IN BOOLEAN := FALSE,
    num_errors OUT PLS_INTEGER,
    copy_statistics IN BOOLEAN := FALSE,
    copy_mvlog IN BOOLEAN := FALSE
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>원본 테이블과 새 테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">orig_table</td><td>원본 테이블의 이름이다.</td></tr><tr><td align="left">int_table</td><td>새 테이블의 이름이다.</td></tr><tr><td align="left">copy_indexes</td><td><p>인덱스들도 복사해 줄 것인지 명시한다. </p><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>0 : 인덱스를 복사하지 않는다.</p>
                      </li><li>
                        <p>dbms_redefinition.cons_orig_params : 인덱스를 복사한다.
                        단, domain 인덱스, global partitioned 인덱스, function-based
                        인덱스가 있을 경우, 수행이 불가능하다.</p>
                      </li></ul></div></td></tr><tr><td align="left">copy_triggers</td><td><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>TRUE : 트리거를 복사한다.</p>
                      </li><li>
                        <p>FALSE : 트리거를 복사하지 않는다.</p>
                      </li></ul></div></td></tr><tr><td align="left">copy_constraints</td><td><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>TRUE : 제약 사항들을 복사한다.</p>
                      </li><li>
                        <p>FALSE : 제약 사항들을 복사하지 않는다.</p>
                      </li></ul></div></td></tr><tr><td align="left">copy_privileges</td><td><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>TRUE : 테이블의 권한을 복사한다.</p>
                      </li><li>
                        <p>FALSE : 테이블의 권한을 복사하지 않는다.</p>
                      </li></ul></div></td></tr><tr><td align="left">ignore_errors</td><td><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>TRUE : 관련있는 객체를 복사하며 발생하는 에러는 무시하고 넘어간다.</p>
                      </li><li>
                        <p>FALSE : 관련있는 객체를 복사하며 에러가 발생하면 멈춘다.</p>
                      </li></ul></div></td></tr><tr><td align="left">num_errors</td><td>에러가 발생한 횟수를 담아 준다.</td></tr><tr><td align="left">copy_statistics</td><td>테이블의 통계 정보를 복사한다. 미지원 기능이다.</td></tr><tr><td align="left">copy_mvlog</td><td>테이블의 Materialized View LOG들을 복사한다. 미지원 기능이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">CREATE TABLE T1 (A NUMBER PRIMARY KEY, B NUMBER);
CREATE INDEX I1 ON T1(B);
CREATE TABLE INT_T1 (A NUMBER, B NUMBER);

BEGIN
   DBMS_REDEFINITION.START_REDEF_TABLE('<span>TIBERO</span>', 'T1', 'INT_T1',
      'A A, B B'); 
END; 
/

DECLARE num_errors pls_integer;
BEGIN
   DBMS_REDEFINITION.COPY_TABLE_DEPENDENTS('<span>TIBERO</span>', 'T1', 'INT_T1',
       DBMS_REDEFINITION.CONS_ORIG_PARAMS,
       TRUE, TRUE, TRUE, TRUE, num_errors, FALSE);
END;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_FINISH_REDEF_TABLE"/>28.3.4. FINISH_REDEF_TABLE<a id="d5e10972" class="indexterm"/></h3></div></div></div>
      

      <p>온라인 테이블 재정의를 종료하는 프러시저이다. 이 프러시저에 원본 테이블과 새 테이블의 이름을 지정하면, 재정의 중에
      변경된 데이터를 서로 교체한 후 원본 테이블과 새 테이블의 이름을 동기화한다. 이로써 재정의가 종료된다. 단, 시스템이 객체를
      바꾸는 등의 작업을 하기 때문에 해당 테이블에서 수행되는 트랜잭션이 없는 경우에만 프러시저가 종료 작업을 수행한다.</p>

      <div class="literallayout"><p/></div>

      <p>FINISH_REDEF_TABLE 프러시저<a id="d5e10978" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE FINISH_REDEF_TABLE 
( 
    uname IN VARCHAR2, 
    orig_table IN VARCHAR2,
    int_table IN VARCHAR2,
    part_name IN VARCHAR2 DEFAULT NULL
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>원본 테이블과 새 테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">orig_table</td><td>원본 테이블의 이름이다.</td></tr><tr><td align="left">int_table</td><td>새 테이블의 이름이다.</td></tr><tr><td align="left">part_name</td><td><p>재정의 중인 파티션의 이름이다. 한 테이블의 단 하나의 파티션이 재정의 중일 경우에는
                  파티션의 이름을 해당 파라미터로 명시해야 한다. </p><p>NULL은 전체 테이블이 재정의
                  중이라는 것을 의미한다.</p><p>테이블의 여러 파티션이 재정의 중일 경우에는 각 파티션 이름을
                  콤마로 구분해서 명시한다.</p></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">BEGIN
  DBMS_REDEFINITION.FINISH_REDEF_TABLE('<span>TIBERO</span>', 
 'ORIG_TABLE', 'INT_TABLE');
END; /</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_REGISTER_DEPENDENT_OBJECT"/>28.3.5. REGISTER_DEPENDENT_OBJECT<a id="d5e11016" class="indexterm"/></h3></div></div></div>
      

      <p>기존 테이블의 관련 객체와 새 테이블의 관련 객체를 매핑시킨다. 온라인 테이블 재정의가 끝나면 매핑시킨 객체들의 이름이
      서로 바뀌게 된다. 단, 관련 객체가 제약조건이고 제약조건의 이름과 테이블 이름이 같을 경우 수행이 불가능하다.</p>

      <div class="literallayout"><p/></div>

      <p>REGISTER_DEPENDENT_OBJECT 프러시저의 세부 내용은 다음과 같다.<a id="d5e11022" class="indexterm"/></p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE REGISTER_DEPENDENT_OBJECT 
(
    uname IN VARCHAR2, 
    orig_table IN VARCHAR2, 
    int_table IN VARCHAR2,
    dep_type IN PLS_INTEGER DEFAULT 0,
    dep_owner IN VARCHAR2,
    dep_orig_name IN VARCHAR2,
    dep_int_name IN VARCHAR2 
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>원본 테이블과 새 테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">orig_table</td><td>원본 테이블의 이름이다.</td></tr><tr><td align="left">int_table</td><td>새 테이블의 이름이다.</td></tr><tr><td align="left">dep_type</td><td>관련 객체의 타입이다. 현재 2(인덱스), 3(제약조건), 4(트리거) 외에는 미지원
                  기능이다.</td></tr><tr><td align="left">dep_owner</td><td>관련 객체를 소유한 사용자 이름이다.</td></tr><tr><td align="left">dep_orig_name</td><td>원본 테이블의 관련 객체 이름이다.</td></tr><tr><td align="left">dep_int_name</td><td>새 테이블의 관련 객체 이름이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">CREATE TABLE T1 (A NUMBER PRIMARY KEY, B NUMBER);
CREATE INDEX I1 ON T1(B);
CREATE TABLE INT_T1 (A NUMBER, B NUMBER);
CREATE INDEX INT_I1 ON INT_T1(B);

BEGIN
   DBMS_REDEFINITION.START_REDEF_TABLE('<span>TIBERO</span>', 'T1', 'INT_T1',
     'A A, B B'); 
END; 
/

BEGIN
   DBMS_REDEFINITION.REGISTER_DEPENDENT_OBJECT('<span>TIBERO</span>', 'T1', 'INT_T1',
           DBMS_REDEFINITION.CONS_INDEX, 'TIBERO', 'I1', 'INT_I1');
END;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_START_REDEF_TABLE"/>28.3.6. START_REDEF_TABLE<a id="d5e11067" class="indexterm"/></h3></div></div></div>
      

      <p>온라인 테이블 재정의를 시작하는 프러시저이다. 이 프러시저에 원본 테이블과 새 테이블의 이름 그리고 컬럼 대응 정보를
      지정하면, 원본 테이블의 데이터를 새 테이블에 옮기기 시작한다.</p>

      <p>여기서 새 테이블은 이 프러시저를 실행하기 전에 미리 생성해야 하며, 원본 테이블과 같은 스키마에 존재해야 한다. 단,
      파티셔닝, 인덱스, 제약조건, 트리거와 같은 테이블의 구조와 관련된 객체는 원본 테이블과 같지 않아도 된다.</p>

      <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
        <p>컬럼 대응 정보<a id="d5e11074" class="indexterm"/>는 원본 테이블의 어떤 컬럼을 새 테이블의 어떤 컬럼에 저장할지를 지정하는 것을 말한다.</p>
      </div>

      <div class="literallayout"><p/></div>

      <p>START_REDEF_TABLE 프러시저<a id="d5e11078" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE START_REDEF_TABLE 
( 
    uname IN VARCHAR2,
    orig_table IN VARCHAR2,
    int_table IN VARCHAR2,
    col_mapping IN VARCHAR2 DEFAULT NULL, 
    options_flag IN BINARY_INTEGER DEFAULT cons_use_pk,
    part_name IN VARCHAR2 DEFAULT NULL
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>원본 테이블과 새 테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">orig_table</td><td>원본 테이블의 이름이다.</td></tr><tr><td align="left">int_table</td><td>새 테이블의 이름이다.</td></tr><tr><td align="left">col_mapping</td><td>원본 테이블과 새 테이블의 컬럼 대응 정보이다. 현재 미지원 기능이다.</td></tr><tr><td align="left">options_flag</td><td><p>원본 테이블에서 새 테이블로 데이터를 옮길 때 어떤 정보를 사용할 것인지를
                  지정한다.</p><div class="itemizedlist"><ul type="circle" compact="compact"><li>
                        <p>cons_use_pk : 기본 키의 정보를 사용한다. (지정하지 않을 경우
                        기본값)</p>
                      </li><li>
                        <p>cons_use_rowid : ROWID를 사용한다.</p>
                      </li></ul></div></td></tr><tr><td align="left">part_name</td><td><p>재정의할 파티션의 이름이다. 한 테이블의 단 하나의 파티션을 재정의하는 경우에는
                  파티션의 이름을 해당 파라미터로 명시해야 한다. </p><p>NULL은 전체 테이블이 재정의된다는
                  것을 의미한다.</p><p>테이블의 여러 파티션을 재정의하는 경우에는 각 파티션 이름을 콤마로
                  구분해서 명시한다.</p></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">create table ORIG_TABLE ( 
   PRODUCT_ID NUMBER primary key,
   PRODUCT_NAME VARCHAR2(20), 
   PRICE NUMBER, 
   SOLD_DATE DATE );

insert into ORIG_TABLE values (1, '<span>Tibero</span>', 10000, SYSDATE);

commit;
create table INT_TABLE ( 
   ID NUMBER primary key, 
   NAME VARCHAR2(30), 
   PRICE NUMBER(8,2), 
   SOLD_DATE DATE )
partition by range (SOLD_DATE) 
( 
   partition P_2008 values less than ('2009-01-01'), 
   partition P_2009 values less than (maxvalue)
);
      
BEGIN 
   DBMS_REDEFINITION.START_REDEF_TABLE('<span>TIBERO</span>', 'ORIG_TABLE',
   'INT_TABLE', 'PRODUCT_ID ID, PRODUCT_NAME NAME, PRICE PRICE, 
    SOLD_DATE SOLD_DATE');
END; 
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_SYNC_INTERIM_TABLE"/>28.3.7. SYNC_INTERIM_TABLE<a id="d5e11129" class="indexterm"/></h3></div></div></div>
      

      <p>원본 테이블과 새 테이블의 데이터를 동기화하는 프러시저이다. 물론 FINISH_REDEF_TABLE 프러시저를 실행해도
      동기화가 되지만, 온라인 테이블을 재정의하는 중에 해당 테이블에 DML 문장이 많이 수행되는 경우라면 변경된 데이터를 한꺼번에
      반영해야 하므로 처리 속도가 늦어질 수 있다. 또한, 재정의를 종료하는 동안에도 해당 테이블에 트랜잭션이 없어야 하기 때문에
      DML 문장의 수행이 제한된다.</p>

      <p>SYNC_INTERIM_TABLE 프러시저는 이러한 경우와는 다르게 재정의 중에도 동기화를 수행할 수 있으며, 재정의를
      종료하는 시간을 줄일 수 있다.</p>

      <div class="literallayout"><p/></div>

      <p>SYNC_INTERIM_TABLE 프러시저<a id="d5e11136" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE SYNC_INTERIM_TABLE 
( 
    uname IN VARCHAR2, 
    orig_table IN VARCHAR2,
    int_table IN VARCHAR2,
    part_name IN VARCHAR2 DEFAULT NULL 
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>원본 테이블과 새 테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">orig_table</td><td>원본 테이블의 이름이다.</td></tr><tr><td align="left">int_table</td><td>새 테이블의 이름이다.</td></tr><tr><td align="left">part_name</td><td><p>재정의 중인 파티션의 이름이다. 한 테이블의 단 하나의 파티션이 재정의 중일 경우에는
                  파티션의 이름을 해당 파라미터로 명시해야 한다. </p><p>NULL은 전체 테이블이 재정의
                  중이라는 것을 의미한다.</p><p>테이블의 여러 파티션이 재정의 중일 경우에는 각 파티션 이름을
                  콤마로 구분해서 명시한다.</p></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">BEGIN
    DBMS_REDEFINITION.SYNC_INTERIM_TABLE('<span>TIBERO</span>', 'ORIG_TABLE', 'INT_TABLE');
END; /</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="DBMS_REDEFINITION_UNREGISTER_DEPENDENT_OBJECT"/>28.3.8. UNREGISTER_DEPENDENT_OBJECT<a id="d5e11174" class="indexterm"/></h3></div></div></div>
      

      <p>원본 테이블과 새 테이블 사이에 매핑되어 있는 관련 객체들의 정보를 해제한다.</p>

      <div class="literallayout"><p/></div>

      <p>UNREGISTER_DEPENDENT_OBJECT 프러시저의 세부 내용은 다음과 같다.<a id="d5e11180" class="indexterm"/></p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE UNREGISTER_DEPENDENT_OBJECT 
(
    uname IN VARCHAR2, 
    orig_table IN VARCHAR2, 
    int_table IN VARCHAR2,
    dep_type IN PLS_INTEGER DEFAULT 0,
    dep_owner IN VARCHAR2,
    dep_orig_name IN VARCHAR2,
    dep_int_name IN VARCHAR2 
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">uname</td><td>원본 테이블과 새 테이블이 속한 스키마의 이름이다.</td></tr><tr><td align="left">orig_table</td><td>원본 테이블의 이름이다.</td></tr><tr><td align="left">int_table</td><td>새 테이블의 이름이다.</td></tr><tr><td align="left">dep_type</td><td>관련 객체의 타입이다. 현재 2(인덱스), 3(제약조건), 4(트리거) 외에는 미지원
                  기능이다.</td></tr><tr><td align="left">dep_owner</td><td>관련 객체를 소유한 사용자 이름이다.</td></tr><tr><td align="left">dep_orig_name</td><td>원본 테이블의 관련 객체 이름이다.</td></tr><tr><td align="left">dep_int_name</td><td>새 테이블의 관련 객체 이름이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">CREATE TABLE T1 (A NUMBER PRIMARY KEY, B NUMBER);
CREATE INDEX I1 ON T1(B);
CREATE TABLE INT_T1 (A NUMBER, B NUMBER);
CREATE INDEX INT_I1 ON INT_T1(B);

BEGIN
   DBMS_REDEFINITION.START_REDEF_TABLE('<span>TIBERO</span>', 'T1', 'INT_T1',
     'A A, B B'); 
END; 
/

BEGIN
   DBMS_REDEFINITION.REGISTER_DEPENDENT_OBJECT('<span>TIBERO</span>', 'T1', 'INT_T1',
      DBMS_REDEFINITION.CONS_INDEX,
      'TIBERO', 'I1', 'INT_I1');
END;
/

BEGIN
   DBMS_REDEFINITION.UNREGISTER_DEPENDENT_OBJECT('<span>TIBERO</span>', 'T1', 'INT_T1',
   DBMS_REDEFINITION.CONS_INDEX,
     'TIBERO', 'I1', 'INT_I1');
END;
/</pre>
        </li></ul></div>
    </div>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap_dbms_redact.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chap_dbms_repair.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제27장 DBMS_REDACT </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제29장 DBMS_REPAIR</td></tr></table></div><div xmlns="" align="center"/></body></html>