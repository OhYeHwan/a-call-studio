<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제72장 UTL_SMTP</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="up" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="prev" href="chap_utl_recomp.html" title="제71장 UTL_RECOMP"/><link rel="next" href="chap_utl_tcp.html" title="제73장 UTL_TCP"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제72장 UTL_SMTP</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap_utl_recomp.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chap_utl_tcp.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chap_utl_smtp"/>제72장 UTL_SMTP</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chap_utl_smtp.html#d5e34310">72.1. 개요</a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#d5e34317">72.2. 타입</a></span></dt><dd><dl><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_CONNECTION_TYPE">72.2.1. CONNECTION Record Type</a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_REPLY_TYPE">72.2.2. REPLY,REPLIES Record Types</a></span></dt></dl></dd><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP">72.3. 프러시저와 함수</a></span></dt><dd><dl><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_CLOSE_DATA">72.3.1. CLOSE_DATA 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_COMMAND">72.3.2. COMMAND 프러시저와 함수</a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_COMMAND_REPLIES">72.3.3. COMMAND_REPLIES 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_DATA">72.3.4. DATA 프러시저와 함수</a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_EHLO">72.3.5. EHLO 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_HELO">72.3.6. HELO 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_HELP">72.3.7. HELP 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_MAIL">72.3.8. MAIL 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_NOOP">72.3.9. NOOP 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_OPEN_CONNECTION">72.3.10. OPEN_CONNECTION 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_OPEN_DATA">72.3.11. OPEN_DATA 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_QUIT">72.3.12. QUIT 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_RCPT">72.3.13. RCPT 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_RSET">72.3.14. RSET 프러시저와 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_VRFY">72.3.15. VRFY 함수 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_WRITE_DATA">72.3.16. WRITE_DATA 프러시저 </a></span></dt><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_WRITE_RAW_DATA">72.3.17. WRITE_RAW_DATA 프러시저 </a></span></dt></dl></dd><dt><span class="section"><a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE">72.4. 예제</a></span></dt></dl></div>
  

  <p>본 장에서는 UTL_SMTP 패키지의 기본 개념과 패키지 내의 프러시저와 함수를 사용하는 방법을 설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e34310"/>72.1. 개요</h2></div></div></div>
    

    <p><span><strong class="guibutton">UTL_SMTP</strong></span><a id="d5e34314" class="indexterm"/>는 SMTP(Simple Mail Transfer Protocol)을 통해 전자 메일 (이메일)을 전송하도록
    설계되었다. 해당 패키지는 많은 명령들에 대하여 절차 및 기능 인터페이스를 모두 제공한다. 기능적 형식으로 클라이언트에서 처리할 수
    있도록 서버에서 응답을 반환한다. 절차적 형식으로 먼저 응답을 확인하고 응답이 일시적 또는 영구 오류를 나타내는 경우 예외를
    발생시킨다.</p>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e34317"/>72.2. 타입</h2></div></div></div>
    

    <p>본 절에서는 UTL_SMTP 패키지에서 제공하는 타입들을 설명한다.</p>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_CONNECTION_TYPE"/>72.2.1. CONNECTION Record Type<a id="d5e34322" class="indexterm"/></h3></div></div></div>
      

      <p>SMTP 연결을 나타내는데 사용되는 PL/SQL 레코드 타입이다.</p>

      <div class="literallayout"><p/></div>

      <p>CONNECTION Record Type <a id="d5e34328" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">TYPE connection IS RECORD (
    host              VARCHAR2(255),
    port              PLS_INTEGER,
    tx_timeout        PLS_INTEGER, 
    private_tcp_con   utl_tcp.connection,
    private_state     PLS_INTEGER);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">host</td><td>연결이 설정될 때 원격 호스트로로 사용된다. </td></tr><tr><td align="left">port</td><td>연결된 원격 SMTP 서버의 포트 번호이다. </td></tr><tr><td align="left">tx_timeout</td><td>UTL_SMTP 연결에서 읽기 또는 쓰기 작업이 시간 초과되기 전에 패키지가 대기하는 시간이다.
                  </td></tr><tr><td align="left">private_tcp_con</td><td>해당 필드를 수정하면 안된다.</td></tr><tr><td align="left">private_state</td><td>해당 필드를 수정하면 안된다.</td></tr></tbody></table>
          </div>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_REPLY_TYPE"/>72.2.2. REPLY,REPLIES Record Types<a id="d5e34362" class="indexterm"/></h3></div></div></div>
      

      <p>SMTP 응답을 나타내는 데 사용되는 PL/SQL 레코드 타입이다. 각 SMTP 응답은 응답 코드와 텍스트 메시지로
      구성된다.</p>

      <div class="literallayout"><p/></div>

      <p>REPLY,REPLIES Record Types<a id="d5e34368" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">TYPE reply IS RECORD (
  code    PLS_INTEGER,
  text    VARCHAR2(508));

TYPE replies IS TABLE OF reply INDEX BY BINARY_INTEGER; </pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">code</td><td>세 자리 응답 코드이다. </td></tr><tr><td align="left">text</td><td>답장 메시지이다. </td></tr></tbody></table>
          </div>
        </li></ul></div>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="UTL_SMTP"/>72.3. 프러시저와 함수</h2></div></div></div>
    

    <p>본 절에서는 UTL_SMTP 패키지에서 제공하는 프러시저와 함수를 알파벳 순으로 설명한다.</p>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_CLOSE_DATA"/>72.3.1. CLOSE_DATA 프러시저와 함수 <a id="d5e34396" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 전자 메일 메시지를 종료한다.</p>

      <p>CLOSE_DATA 프러시저와 함수<a id="d5e34401" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.CLOSE_DATA (
   c     IN OUT NOCOPY connection) 
RETURN reply;

UTL_SMTP.CLOSE_DATA (
   c     IN OUT NOCOPY connection);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP 연결이다. </td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답 회신이 여러 개인 경우 마지막 회신이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_COMMAND"/>72.3.2. COMMAND 프러시저와 함수<a id="d5e34440" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 일반 SMTP 명령을 수행한다.<a id="d5e34444" class="indexterm"/>의 설명을 참고한다.</p>

      <div class="literallayout"><p/></div>

      <p>COMMAND 프러시저와 함수 <a id="d5e34449" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.COMMAND (
   c     IN OUT NOCOPY    connection,
   cmd   IN               VARCHAR2,
   arg   IN               VARCHAR2 DEFAULT NULL)
RETURN reply;

UTL_SMTP.COMMAND (
   c     IN OUT NOCOPY    connection,
   cmd   IN               VARCHAR2,
   arg   IN               VARCHAR2 DEFAULT NULL);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP를 연결한다.</td></tr><tr><td align="left">cmd</td><td>서버에 보낼 SMTP 명령이다. </td></tr><tr><td align="left">arg</td><td>SMTP 인자에 대한 추가적인 인자이다. cmd와 arg사이에는 공백이 들어간다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답. 회신이 여러 개인 경우 마지막 회신이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_COMMAND_REPLIES"/>72.3.3. COMMAND_REPLIES 함수 <a id="d5e34494" class="indexterm"/></h3></div></div></div>
      

      <p>해당 함수는 일반 SMTP 명령을 수행하고 여러 응답을 회수한다. <a id="d5e34498" class="indexterm"/>의 설명을 참고한다.</p>

      <div class="literallayout"><p/></div>

      <p>COMMAND_REPLIES 함수 <a id="d5e34503" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.COMMAND_REPLIES (
   c     IN OUT NOCOPY    connection,
   cmd   IN               VARCHAR2,
   arg   IN               VARCHAR2 DEFAULT NULL)
RETURN replies;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">cmd</td><td>서버에 보낼 SMTP 명령이다. </td></tr><tr><td align="left">arg</td><td>SMTP 인자에 대한 추가적인 인자이다. cmd와 arg사이에는 공백이 들어간다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">replies</td><td>명령에 대한 응답. 회신이 여러 개인 경우 마지막 회신이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_DATA"/>72.3.4. DATA 프러시저와 함수<a id="d5e34548" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 이메일 메시지의 body 부분에 해당한다.</p>

      <div class="literallayout"><p/></div>

      <p>DATA 프러시저와 함수<a id="d5e34554" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.DATA (
   c     IN OUT NOCOPY connection
   body  IN  VARCHAR2 CHARACTER SET ANY_CS) 
RETURN reply;

UTL_SMTP.DATA (
   c     IN OUT NOCOPY connection
   body  IN VARCHAR2 CHARACTER SET ANY_CS);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">body</td><td>헤더들을 포함한 보낼 메시지이다. </td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답이다. 회신이 여러 개인 경우 마지막 회신이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_EHLO"/>72.3.5. EHLO 프러시저와 함수 <a id="d5e34596" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 EHLO명령을 이용하여, SMTP 서버와 초기 핸드쉐이크를 수행한다.</p>

      <div class="literallayout"><p/></div>

      <p>EHLO 프러시저와 함수<a id="d5e34602" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.EHLO (
   c       IN OUT NOCOPY connection, 
   domain  IN) 
RETURN replies;

UTL_SMTP.EHLO (
   c       IN OUT NOCOPY connection, 
   domain  IN);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">domain</td><td>로컬(송신) 호스트의 도매인 이름이다. 식별 목적으로 사용된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">replies</td><td>명령에 대한 응답이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_HELO"/>72.3.6. HELO 프러시저와 함수 <a id="d5e34644" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 HELO명령을 이용하여, SMTP 서버와 초기 핸드쉐이크를 수행한다.</p>

      <div class="literallayout"><p/></div>

      <p>HELO 프러시저와 함수<a id="d5e34650" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.HELO (
   c       IN OUT NOCOPY   connection, 
   domain  IN              VARCHAR2) 
RETURN reply;

UTL_SMTP.HELO (
   c       IN OUT NOCOPY   connection, 
   domain  IN              VARCHAR2);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">domain</td><td>로컬(송신) 호스트의 도매인 이름이다. 식별 목적으로 사용된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답이다. 응답이 여러개 있으면 마지막 응답이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_HELP"/>72.3.7. HELP 함수 <a id="d5e34692" class="indexterm"/></h3></div></div></div>
      

      <p>해당 함수는 HELP 명령을 전송한다.</p>

      <div class="literallayout"><p/></div>

      <p>HELP 함수<a id="d5e34698" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.HELP (
   c         IN OUT NOCOPY   connection, 
   command   IN              VARCHAR2 DEFAULT NULL) 
RETURN replies;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">command</td><td>help 메시지를 받기 위한 명령이다. </td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">replies</td><td>명령에 대한 응답이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_MAIL"/>72.3.8. MAIL 프러시저와 함수 <a id="d5e34740" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 서버와의 메일 트랜잭션을 시작한다.</p>

      <div class="literallayout"><p/></div>

      <p>MAIL 프러시저와 함수<a id="d5e34746" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.MAIL (
   c           IN OUT NOCOPY   connection, 
   sender      IN              VARCHAR2, 
   parameters  IN              VARCHAR2 DEFAULT NULL) 
RETURN reply;

UTL_SMTP.MAIL (
   c           IN OUT NOCOPY   connection, 
   sender      IN              VARCHAR2, 
   parameters  IN              VARCHAR2 DEFAULT NULL);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">sender</td><td>메시지를 보내는 사용자의 이메일 주소이다.</td></tr><tr><td align="left">parameters</td><td>명령에 대한 추가 매개변수이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">replies</td><td>명령에 대한 응답이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_NOOP"/>72.3.9. NOOP 프러시저와 함수 <a id="d5e34791" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 NULL 명령을 실행한다. 서버와 연결이 되어있는지 확인하는 용도로 쓰인다.</p>

      <div class="literallayout"><p/></div>

      <p>NOOP 프러시저와 함수 <a id="d5e34797" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.NOOP (
   c  IN OUT NOCOPY connection) 
RETURN reply;

UTL_SMTP.NOOP (
   c  IN OUT NOCOPY connection);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답이다. 응답이 여러 개일 경우 마지막 응답이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_OPEN_CONNECTION"/>72.3.10. OPEN_CONNECTION 함수 <a id="d5e34836" class="indexterm"/></h3></div></div></div>
      

      <p>해당 함수는 SMTP 서버로 연결하는 함수이다.</p>

      <div class="literallayout"><p/></div>

      <p>OPEN_CONNECTION 함수 <a id="d5e34842" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.OPEN_CONNECTION (
   host                            IN  VARCHAR2, 
   port                            IN  PLS_INTEGER DEFAULT 25, 
   c                               OUT connection, 
   tx_timeout                      IN  PLS_INTEGER DEFAULT NULL)
 RETURN reply; 

UTL_SMTP.OPEN_CONNECTION (
   host                           IN  VARCHAR2, 
   port                           IN  PLS_INTEGER DEFAULT 25, 
   tx_timeout                     IN  PLS_INTEGER DEFAULT NULL) 
RETURN connection;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">host</td><td>SMTP 서버 호스트의 이름이다.</td></tr><tr><td align="left">port</td><td>SMTP 서버가 듣고 있는 포트 번호이다. (주로 25번)</td></tr><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">tx_timeout</td><td>UTL_SMTP 연결에 대하여 읽기 또는 쓰기 작업에서 시간이 초과되기 전에 패키지가 대기하는
                  시간이다. 읽는 작업에서 즉시 읽을 수 있는 데이터가 없으면 시간이 초과된다. 쓰는 작업에서 패키지의 출력
                  버퍼가 가득차고 차단되지 않은 데이터가 네트워크로 전송되지 않으면 시간이 초과된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답. 응답이 여러 개일 경우 마지막 응답이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_OPEN_DATA"/>72.3.11. OPEN_DATA 프러시저와 함수 <a id="d5e34890" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 WRITE_DATA 및 WRITE_RAW_DATA를 사용하여 메일 메시지를 쓸 수 있도록 명령을
      보낸다.</p>

      <div class="literallayout"><p/></div>

      <p>OPEN_DATA 프러시저와 함수 <a id="d5e34896" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.OPEN_DATA (
   c     IN OUT NOCOPY connection) 
RETURN reply;

UTL_SMTP.OPEN_DATA (
   c     IN OUT NOCOPY connection);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">data</td><td>헤더를 포함한 메시지이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답. 응답이 여러 개일 경우 마지막 응답이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_QUIT"/>72.3.12. QUIT 프러시저와 함수 <a id="d5e34938" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 SMTP 세션을 종료하고 서버와의 연결을 끊는다.</p>

      <div class="literallayout"><p/></div>

      <p>QUIT 프러시저와 함수 <a id="d5e34944" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.QUIT (
   c  IN OUT NOCOPY connection) 
RETURN reply;

UTL_SMTP.QUIT (
   c  IN OUT NOCOPY connection);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답이다. 응답이 여러 개일 경우 마지막 응답이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_RCPT"/>72.3.13. RCPT 함수 <a id="d5e34983" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 전자 메일 메시지의 수신자를 지정한다.</p>

      <div class="literallayout"><p/></div>

      <p>RCPT 함수 <a id="d5e34989" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.RCPT (
   c           IN OUT NOCOPY     connection,
   recipient   IN                VARCHAR2,
   parameters  IN                VARCHAR2 DEFAULT NULL)
RETURN reply;

UTL_SMTP.RCPT (
   c           IN OUT NOCOPY     connection,
   recipient   IN                VARCHAR2,
   parameters  IN                VARCHAR2 DEFAULT NULL);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">recipient</td><td>메시지가 전송되는 사용자의 이메일 주소이다.</td></tr><tr><td align="left">parameters</td><td>RCPT 명령에 대한 추가 매개 변수이다. </td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답이다. 응답이 여러 개일 경우 마지막 응답이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_RSET"/>72.3.14. RSET 프러시저와 함수 <a id="d5e35034" class="indexterm"/></h3></div></div></div>
      

      <p>해당 서브프로그램은 현재 메일 트랜잭션을 종료한다.</p>

      <div class="literallayout"><p/></div>

      <p>RSET 프러시저와 함수 <a id="d5e35040" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.RSET (
   c  IN OUT NOCOPY connection) 
RETURN reply;

UTL_SMTP.RSET (
   c  IN OUT NOCOPY connection);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>명령에 대한 응답이다. 응답이 여러 개일 경우 마지막 응답이 반환된다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_VRFY"/>72.3.15. VRFY 함수 <a id="d5e35079" class="indexterm"/></h3></div></div></div>
      

      <p>해당 함수는 대상 이메일 주소의 유효성을 확인한다.</p>

      <div class="literallayout"><p/></div>

      <p>VRFY 함수 <a id="d5e35085" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.VRFY (
   c          IN OUT NOCOPY connection
   recipient  IN VARCHAR2) 
RETURN reply;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">recipient</td><td>확인할 메일 주소이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>반환값</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">reply</td><td>SMTP 응답을 반환한다. </td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_WRITE_DATA"/>72.3.16. WRITE_DATA 프러시저 <a id="d5e35127" class="indexterm"/></h3></div></div></div>
      

      <p>해당 프로시저는 전자 메일 메시지를 작성한다. WRITE_DATA에 대한 반복 호출은 전자 메일 메시지에 데이터를 추가
      한다.</p>

      <div class="literallayout"><p/></div>

      <p>WRITE_DATA 프러시저 <a id="d5e35133" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.WRITE_DATA (
   c     IN OUT NOCOPY connection, 
   data  IN VARCHAR2);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">data</td><td>헤더를 포함한 메시지 텍스트 부분이다. </td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_SMTP_WRITE_RAW_DATA"/>72.3.17. WRITE_RAW_DATA 프러시저 <a id="d5e35162" class="indexterm"/></h3></div></div></div>
      

      <p>해당 프로시저는 전자 메일 메시지를 작성한다. WRITE_RAW_DATA에 대한 반복 호출은 전자 메일 메시지에
      데이터를 추가한다.</p>

      <div class="literallayout"><p/></div>

      <p>WRITE_RAW_DATA 프러시저<a id="d5e35168" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">UTL_SMTP.WRITE_RAW_DATA (
   c     IN OUT NOCOPY connection
   data  IN RAW);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">c</td><td>SMTP로 연결한다.</td></tr><tr><td align="left">data</td><td>헤더를 포함한 메시지 텍스트 부분이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_smtp.html#UTL_SMTP_EXAMPLE" title="72.4. 예제">“72.4. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="UTL_SMTP_EXAMPLE"/>72.4. 예제</h2></div></div></div>
    

    <p>다음은 OPEN_CONNECTION, HELO, MAIL, RCPT, OPEN_DATA, WRITE_DATA,
    CLOSE_DATA, QUIT를 이용하여 SMTP를 수행하는 예시이다. 25번 포트를 이용하여 SMTP 서버에 연결하고 간단한 문자
    메시지를 보낸다.</p>

    <pre class="programlisting">DECLARE                                                                                             
   t_host VARCHAR2(30) := 'localhost';                                                                
   t_port NUMBER := 25;                                                                               
   t_domain VARCHAR2(30) := 'tmax.co.kr';                                                              
                                                                                                      
   t_from VARCHAR2(50) := 'tibero@tmax.co.kr';                                                     
   t_to VARCHAR2(50) := 'tmax@tmax.co.kr';                                                       
   t_intro VARCHAR2(50) := 'This is mail from TMAX';                                                  
   l_encoded_username VARCHAR2(1000);                                                                 
   l_encoded_password VARCHAR2(1000);                                                                 
   c utl_smtp.connection;                                                                             
   reply_rset utl_smtp.reply;                                                                         
   reply_vrfy utl_smtp.reply;                                                                         
   reply_help utl_smtp.replies;                                                                       
   reply_command utl_smtp.reply;                                                                      
   reply_command_replies utl_smtp.replies;                                                            
  BEGIN                                                                                               
    c := UTL_SMTP.OPEN_CONNECTION(t_host,t_port);                                                     
    reply_vrfy := utl_smtp.vrfy(c, 'tmax@tmax.co.kr');                                           
    reply_help := utl_smtp.help(c, 'HELP');                                                           
    reply_command := utl_smtp.command(c, 'AUTH LOGIN');                                               
    reply_command_replies := utl_smtp.command_replies(c, 'AUTH','LOGIN');                             
    dbms_output.put_line('vrfy:'||reply_vrfy.code);                                                   
    dbms_output.put_line('vrfy:'||reply_vrfy.text);                                                   
    dbms_output.put_line('help:'||reply_help(reply_help.count).code);                                 
    dbms_output.put_line('help:'||reply_help(reply_help.count).text);                                 
    dbms_output.put_line('command:'||reply_command.code);                                             
    dbms_output.put_line('command:'||reply_command.text);                                             
    dbms_output.put_line('command_replies:'||reply_command_replies(
reply_command_replies.count).code); 
    dbms_output.put_line('command_replies:'||reply_command_replies(
reply_command_replies.count).text); 
                                                                                                                                                                                                           
    reply_rset := utl_smtp.rset(c);                                                                   
    dbms_output.put_line('rset:'||reply_rset.code);                                                   
    dbms_output.put_line('rset:'||reply_rset.text);                                                   
                                                                                                      
    UTL_SMTP.HELO(c, t_domain); --UTL_SMTP.EHLO(c, t_domain);                                         
    UTL_SMTP.NOOP(c);                                                                                 
    UTL_SMTP.MAIL(c, t_from);                                                                         
    UTL_SMTP.RCPT(c, t_to);                                                                           
                                                                                                      
    --reply_rset := utl_smtp.rset(c);                                                                 
    --dbms_output.put_line('rset:'||reply_rset.code);                                                 
    --dbms_output.put_line('rset:'||reply_rset.text);                                                 
                                                                                                      
    UTL_SMTP.OPEN_DATA(c);                                                                            
    UTL_SMTP.WRITE_DATA(c,'From:' || '"tibero" &lt;tibero@tmax.co.kr&gt;' || UTL_TCP.CRLF);              
    UTL_SMTP.WRITE_DATA(c,'To:' || '"tmax" &lt;tmax@tmax.co.kr&gt;' || UTL_TCP.CRLF);                       
    UTL_SMTP.WRITE_RAW_DATA( c, UTL_RAW.CAST_TO_RAW(''|| t_intro||''|| UTL_TCP.CRLF));                
    UTL_SMTP.WRITE_DATA(c,'Subject: Test' || UTL_TCP.CRLF);                                           
    UTL_SMTP.WRITE_DATA(c, UTL_TCP.CRLF);                                                             
    UTL_SMTP.WRITE_DATA(c,'THIS IS SMTP_TEST1' || UTL_TCP.CRLF);                                      
    UTL_SMTP.CLOSE_DATA(c);                                                                                         
    UTL_SMTP.QUIT(c);                                                                                 
  EXCEPTION                                                                                           
    WHEN utl_smtp.transient_error OR utl_smtp.permanent_error THEN                                    
      BEGIN                                                                                           
        UTL_SMTP.QUIT(c);                                                                             
      EXCEPTION                                                                                       
        WHEN UTL_SMTP.TRANSIENT_ERROR OR UTL_SMTP.PERMANENT_ERROR THEN                                
          NULL;                                                                                       
      END;                                                                                            
      raise_application_error(-20000,                                                                 
        'Failed to send mail due to the following error: ' || sqlerrm);                               
  END;                                                                                                
  /                   

        
CREATE OR REPLACE PROCEDURE send_email
      ( sender    IN VARCHAR2,
        recipient IN VARCHAR2,
        message   IN VARCHAR2)
      AS      
        mailhost VARCHAR2(100) := 'localhost';
        c utl_smtp.connection;
      BEGIN
         c :=utl_smtp.open_connection(mailhost,25); 
         utl_smtp.helo(c,mailhost); 
         utl_smtp.mail(c,sender); 
         utl_smtp.rcpt(c,recipient); 
         utl_smtp.data(c,message); 
         utl_smtp.quit(c);
     END;

SQL&gt; exec send_email('tibero@tmax.co.kr','tmax@tmax.co.kr',
'This sample is education purpose only');</pre>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap_utl_recomp.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chap_utl_tcp.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제71장 UTL_RECOMP </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제73장 UTL_TCP</td></tr></table></div><div xmlns="" align="center"/></body></html>