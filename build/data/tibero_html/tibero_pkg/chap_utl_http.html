<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제67장 UTL_HTTP</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="up" href="index.html" title="Tibero tbPSM 참조 안내서"/><link rel="prev" href="chap_utl_file.html" title="제66장 UTL_FILE"/><link rel="next" href="chap_utl_i18n.html" title="제68장 UTL_I18N"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제67장 UTL_HTTP</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chap_utl_file.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chap_utl_i18n.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chap_utl_http"/>제67장 UTL_HTTP</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chap_utl_http.html#d5e31656">67.1. 개요</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_constant">67.2. 상수</a></span></dt><dd><dl><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_constant_version">67.2.1. HTTP 버전 상수</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_constant_port">67.2.2. HTTP 포트 상수</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_constant_status">67.2.3. 상태 코드 상수</a></span></dt></dl></dd><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_type">67.3. 타입</a></span></dt><dd><dl><dt><span class="section"><a href="chap_utl_http.html#d5e31703">67.3.1. HTML_PIECES</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_type_req">67.3.2. req</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_type_resp">67.3.3. resp</a></span></dt></dl></dd><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_exception">67.4. 예외</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_function">67.5. 함수</a></span></dt><dd><dl><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_BEGIN_REQUEST">67.5.1. BEGIN_REQUEST</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_GET_RESPONSE">67.5.2. GET_RESPONSE</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_REQUEST">67.5.3. REQUEST</a></span></dt></dl></dd><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_procedure">67.6. 프러시저</a></span></dt><dd><dl><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_END_RESPONSE">67.6.1. END_RESPONSE</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_GET_BODY_CHARSET">67.6.2. GET_BODY_CHARSET</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_GET_DETAILED_EXCP_SUPPORT">67.6.3. GET_DETAILED_EXCP_SUPPORT</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_GET_TRANSFER_TIMEOUT">67.6.4. GET_TRANSFER_TIMEOUT</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_READ_RAW">67.6.5. READ_RAW</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_READ_TEXT">67.6.6. READ_TEXT</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_READ_LINE">67.6.7. READ_LINE</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_SET_BODY_CHARSET">67.6.8. SET_BODY_CHARSET</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_SET_DETAILED_EXCP_SUPPORT">67.6.9. SET_DETAILED_EXCP_SUPPORT</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_SET_HEADER">67.6.10. SET_HEADER</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_SET_RESPONSE_ERROR_CHECK">67.6.11. SET_RESPONSE_ERROR_CHECK</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_SET_TRANSFER_TIMEOUT">67.6.12. SET_TRANSFER_TIMEOUT</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#UTL_HTTP_WRITE_TEXT">67.6.13. WRITE_TEXT</a></span></dt></dl></dd><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_url">67.7. URL</a></span></dt><dt><span class="section"><a href="chap_utl_http.html#sect_utl_http_example">67.8. 예제</a></span></dt></dl></div>
  

  <p>본 장에서는 HTTP/1.1을 기준으로 작성되었으며, UTL_HTTP 패키지의 기본 개념과 패키지 내의 함수를 사용하는 방법을
  설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e31656"/>67.1. 개요</h2></div></div></div>
    

    <p><span><strong class="guibutton">UTL_HTTP</strong></span><a id="d5e31660" class="indexterm"/>는 웹 표준(RFC2616)인 HTTP 프로토콜에 따라 클라이언트 역할을 제공하는 패키지이다.</p>

    <p>프로토콜을 세부 조작하거나 간단히 웹 페이지만을 얻어올 수 있는 서브 프로그램을 제공한다.</p>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_utl_http_constant"/>67.2. 상수</h2></div></div></div>
    

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_utl_http_constant_version"/>67.2.1. HTTP 버전 상수<a id="d5e31669" class="indexterm"/></h3></div></div></div>
      

      <p>HTTP 버전의 종류를 나타낸다.</p>

      <div class="literallayout"><p/></div>

      <p>HTTP 버전 상수<a id="d5e31675" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <pre class="programlisting">HTTP_VERSION_1      CONSTANT VARCHAR2(10) := 'HTTP/1.1';
DEFAULT_HTTPS_PORT  CONSTANT PLS_INTEGER := 443;</pre>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_utl_http_constant_port"/>67.2.2. HTTP 포트 상수<a id="d5e31680" class="indexterm"/></h3></div></div></div>
      

      <p>HTTP에서 사용할 네트워크 포트 번호를 나타낸다.</p>

      <div class="literallayout"><p/></div>

      <p>HTTP 포트 상수<a id="d5e31686" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <pre class="programlisting">DEFAULT_HTTP_PORT   CONSTANT PLS_INTEGER := 80;
DEFAULT_HTTPS_PORT  CONSTANT PLS_INTEGER := 443;</pre>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_utl_http_constant_status"/>67.2.3. 상태 코드 상수<a id="d5e31691" class="indexterm"/></h3></div></div></div>
      

      <p>HTTP 프로토콜에 따라 서버로부터 응답받은 응답의 상태를 나타내는 코드이다.</p>

      <div class="literallayout"><p/></div>

      <p>상태 코드 상수<a id="d5e31697" class="indexterm"/>의 세부 내용은 다음과 같다. 이때 상태 코드는 번호 순으로 정렬되어 있다.</p>

      <pre class="programlisting">HTTP_CONTINUE                   CONSTANT PLS_INTEGER := 100;
HTTP_SWITCHING_PROTOCOLS        CONSTANT PLS_INTEGER := 101;
HTTP_OK                         CONSTANT PLS_INTEGER := 200;
HTTP_CREATED                    CONSTANT PLS_INTEGER := 201;
HTTP_ACCEPTED                   CONSTANT PLS_INTEGER := 202;
HTTP_NON_AUTHORITATIVE_INFO     CONSTANT PLS_INTEGER := 203;
HTTP_NO_CONTENT                 CONSTANT PLS_INTEGER := 204;
HTTP_RESET_CONTENT              CONSTANT PLS_INTEGER := 205;
HTTP_PARTIAL_CONTENT            CONSTANT PLS_INTEGER := 206;
HTTP_MULTIPLE_CHOICES           CONSTANT PLS_INTEGER := 300;
HTTP_MOVED_PERMANENTLY          CONSTANT PLS_INTEGER := 301;
HTTP_FOUND                      CONSTANT PLS_INTEGER := 302;
HTTP_SEE_OTHER                  CONSTANT PLS_INTEGER := 303;
HTTP_NOT_MODIFIED               CONSTANT PLS_INTEGER := 304;
HTTP_USE_PROXY                  CONSTANT PLS_INTEGER := 305;
HTTP_TEMPORARY_REDIRECT         CONSTANT PLS_INTEGER := 307;
HTTP_BAD_REQUEST                CONSTANT PLS_INTEGER := 400;
HTTP_UNAUTHORIZED               CONSTANT PLS_INTEGER := 401;
HTTP_PAYMENT_REQUIRED           CONSTANT PLS_INTEGER := 402;
HTTP_FORBIDDEN                  CONSTANT PLS_INTEGER := 403;
HTTP_NOT_FOUND                  CONSTANT PLS_INTEGER := 404;
HTTP_NOT_ACCEPTABLE             CONSTANT PLS_INTEGER := 406;
HTTP_PROXY_AUTH_REQUIRED        CONSTANT PLS_INTEGER := 407;
HTTP_REQUEST_TIME_OUT           CONSTANT PLS_INTEGER := 408;
HTTP_CONFLICT                   CONSTANT PLS_INTEGER := 409;
HTTP_GONE                       CONSTANT PLS_INTEGER := 410;
HTTP_LENGTH_REQUIRED            CONSTANT PLS_INTEGER := 411;
HTTP_PRECONDITION_FAILED        CONSTANT PLS_INTEGER := 412;
HTTP_REQUEST_ENTITY_TOO_LARGE   CONSTANT PLS_INTEGER := 413;
HTTP_REQUEST_URI_TOO_LARGE      CONSTANT PLS_INTEGER := 414;
HTTP_UNSUPPORTED_MEDIA_TYPE     CONSTANT PLS_INTEGER := 415;
HTTP_REQ_RANGE_NOT_SATISFIABLE  CONSTANT PLS_INTEGER := 416;
HTTP_EXPECTATION_FAILED         CONSTANT PLS_INTEGER := 417;
HTTP_NOT_IMPLEMENTED            CONSTANT PLS_INTEGER := 501;
HTTP_BAD_GATEWAY                CONSTANT PLS_INTEGER := 502;
HTTP_SERVICE_UNAVAILABLE        CONSTANT PLS_INTEGER := 503;
HTTP_GATEWAY_TIME_OUT           CONSTANT PLS_INTEGER := 504;
HTTP_VERSION_NOT_SUPPORTED      CONSTANT PLS_INTEGER := 505;</pre>
    </div>
  </div>

  

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_utl_http_type"/>67.3. 타입</h2></div></div></div>
    

    <p>본 절에서는 UTL_HTTP 패키지에서 제공하는 별도 정의된 타입들을 알파벳 순으로 설명한다.</p>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="d5e31703"/>67.3.1. HTML_PIECES<a id="d5e31705" class="indexterm"/></h3></div></div></div>
      

      <p>서버로부터 응답받은 페이지를 문자열의 배열 형태로 받아올 때 사용하는 타입이다.</p>

      <div class="literallayout"><p/></div>

      <p>HTML_PIECES 타입<a id="d5e31711" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">TYPE html_pieces IS TABLE OF VARCHAR2(2000) INDEX BY BINARY_INTEGER;</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_utl_http_type_req"/>67.3.2. req<a id="d5e31719" class="indexterm"/></h3></div></div></div>
      

      <p>서버로 보낼 요청 정보를 담고 있는 타입이다.</p>

      <div class="literallayout"><p/></div>

      <p>req 타입<a id="d5e31725" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">TYPE req IS RECORD
(
    url             VARCHAR2(32767),
    method          VARCHAR2(64),
    http_version    VARCHAR2(64)
);</pre>
        </li><li>
          <p>필드</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">필드 이름</th><th>설명</th></tr></thead><tbody><tr><td align="left">url</td><td>웹 페이지의 주소이며, 자세한 내용은 <a href="chap_utl_http.html#sect_utl_http_url" title="67.7. URL">“67.7. URL”</a>을 참고한다.</td></tr><tr><td align="left">method</td><td><p>서버에 어떠한 종류의 메서드를 요청할지를 나타낸다.
                  </p><p>'OPTIONS', 'GET', 'HEAD', 'POST', 'PUT',
                  'DELETE', 'TRACE', 'CONNECT'의 값만을 허용한다. (이외는
                  미지원)</p></td></tr><tr><td align="left">http_version</td><td>프로토콜 버전을 나타내며, 값의 종류는 <a href="chap_utl_http.html#sect_utl_http_constant_version" title="67.2.1. HTTP 버전 상수">“67.2.1. HTTP 버전 상수”</a>를 참고한다.</td></tr></tbody></table>
          </div>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_utl_http_type_resp"/>67.3.3. resp<a id="d5e31756" class="indexterm"/></h3></div></div></div>
      

      <p>서버에서 온 응답에 대한 상태 정보를 담고 있는 타입이다.</p>

      <div class="literallayout"><p/></div>

      <p>resp 타입<a id="d5e31762" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">TYPE resp IS RECORD
(
    status_code         PLS_INTEGER,
    reason_phrase       VARCHAR2(256),
    http_version        VARCHAR2(64)
);</pre>
        </li><li>
          <p>필드</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">필드 이름</th><th>설명</th></tr></thead><tbody><tr><td align="left">status_code</td><td>요청에 따른 응답에 대한 상태를 나타내는 3자리의 숫자이며, 값의 종류는 <a href="chap_utl_http.html#sect_utl_http_constant_status" title="67.2.3. 상태 코드 상수">“67.2.3. 상태 코드 상수”</a>를 참고한다.</td></tr><tr><td align="left">reason_phrase</td><td>상태 코드에 따르는 간단한 설명이다.</td></tr><tr><td align="left">http_version</td><td>프로토콜 버전을 나타내며, 값의 종류는 <a href="chap_utl_http.html#sect_utl_http_constant_version" title="67.2.1. HTTP 버전 상수">“67.2.1. HTTP 버전 상수”</a>를 참고한다.</td></tr></tbody></table>
          </div>
        </li></ul></div>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_utl_http_exception"/>67.4. 예외</h2></div></div></div>
    

    <p>다음은 UTL_HTTP 패키지에서 미리 제공된 예외이다. 자세한 내용은 <a href="chap_utl_http.html#sect_utl_http_function" title="67.5. 함수">“67.5. 함수”</a>와 <a href="chap_utl_http.html#sect_utl_http_procedure" title="67.6. 프러시저">“67.6. 프러시저”</a>의 "예외 사항" 항목을 참고한다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>BAD_ARGUMENT</p>
      </li><li>
        <p>END_OF_BODY</p>
      </li><li>
        <p>REQUEST_FAILED</p>
      </li></ul></div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_utl_http_function"/>67.5. 함수</h2></div></div></div>
    

    <p>본 절에서는 UTL_HTTP 패키지에서 제공하는 함수를 알파벳 순으로 설명한다.</p>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_BEGIN_REQUEST"/>67.5.1. BEGIN_REQUEST<a id="d5e31806" class="indexterm"/></h3></div></div></div>
      

      <p>웹 서버와 커넥션을 맺고, 어떤 메서드를 통해서 서버에 요청을 할 지 정한다.</p>

      <div class="literallayout"><p/></div>

      <p>BEGIN_REQUEST 함수<a id="d5e31812" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">FUNCTION BEGIN_REQUEST 
(
    url           IN VARCHAR2,
    method        IN VARCHAR2 DEFAULT 'GET',
    http_version  IN VARCHAR2 DEFAULT NULL
) 
RETURN req;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">url</td><td>웹 페이지의 주소이며, 자세한 내용은 <a href="chap_utl_http.html#sect_utl_http_url" title="67.7. URL">“67.7. URL”</a>을 참고한다.</td></tr><tr><td align="left">method</td><td><p>서버에 어떠한 종류의 메서드를 요청할지를 나타낸다.
                  </p><p>'OPTIONS', 'GET', 'HEAD', 'POST', 'PUT',
                  'DELETE', 'TRACE', 'CONNECT'의 값만을 허용한다. (이외는
                  미지원)</p></td></tr><tr><td align="left">http_version</td><td>프로토콜 버전을 나타내며, 값의 종류는 <a href="chap_utl_http.html#sect_utl_http_constant_version" title="67.2.1. HTTP 버전 상수">“67.2.1. HTTP 버전 상수”</a>를 참고한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">REQUEST_FAILED</td><td>잘못된 요청으로 웹 서버와 통신할 수 없는 경우에 발생한다. URL이 올바른지 또는 웹 서버가
                  정상적으로 동작하는지 확인한다.</td></tr><tr><td align="left">PKG_TRANSFER_TIMEOUT</td><td>20초 이상 웹 서버로부터 응답이 없을 때 타임아웃이 발생한 경우이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_GET_RESPONSE"/>67.5.2. GET_RESPONSE<a id="d5e31864" class="indexterm"/></h3></div></div></div>
      

      <p>웹 서버에 요청을 보내고, 응답의 헤더를 읽고, 바디를 읽을 준비를 한다. 메시지 BODY를 읽는 방법은
      2가지이다.</p>

      <p>첫 번째 방법은 메시지 헤더에 "Content-Length: 길이"가 있는 경우이며, 동작은 주어진 길이만큼 메시지
      바디를 읽어온다. 두 번째 방법은 메시지 헤더에 "Transfer-Encoding: Chunked"가 오는 경우이며, 캐리지리턴,
      라인피드 문자가 나오는 경우까지 메시지 바디를 읽는다. 헤더에 "Content-Length:길이"와
      "Transfer-Encoding: Chunked"이 둘다 주어진 경우 전자는 무시된다.</p>

      <div class="literallayout"><p/></div>

      <p>GET_RESPONSE 함수<a id="d5e31871" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">FUNCTION GET_RESPONSE 
(
    r  IN OUT NOCOPY req
) 
RETURN resp;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">r</td><td>요청 식별자이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">BAD_ARGUMENT</td><td>BEGIN_REQUEST 또는 SET_HEADER를 선행하지 않고 해당 함수를 호출하거나,
                  파라미터를 잘못 사용하게 되는 경우 발생한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_REQUEST"/>67.5.3. REQUEST<a id="d5e31910" class="indexterm"/></h3></div></div></div>
      

      <p>URL을 통해 웹 서버로 요청을 보내 최대 2000bytes의 데이터를 반환하는 함수이다. 웹 서버로 요청을 보낼 경우
      HTTP/1.1 표준의 GET 메서드를 이용한다.</p>

      <div class="literallayout"><p/></div>

      <p>REQUEST 함수<a id="d5e31916" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">FUNCTION REQUEST
(
    url              IN  VARCHAR2,
    proxy            IN  VARCHAR2 DEFAULT NULL,
    wallet_path      IN  VARCHAR2 DEFAULT NULL,
    wallet_password  IN  VARCHAR2 DEFAULT NULL
) 
RETURN VARCHAR2;</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">url</td><td>웹 페이지의 주소이며, 자세한 내용은 <a href="chap_utl_http.html#sect_utl_http_url" title="67.7. URL">“67.7. URL”</a>을 참고한다.</td></tr><tr><td align="left">proxy</td><td>프록시 서버의 이름이다. (기본값: NULL, 다음에 구현할 예정이다)</td></tr><tr><td align="left">wallet_path</td><td>클라이언트 쪽에서 HTTPS를 사용하기 위해 필요한 인증서를 저장하는 경로이다. (기본값:
                  NULL, 다음에 구현할 예정이다)</td></tr><tr><td align="left">wallet_password</td><td>인증서를 보기 위한 패스워드이다. (기본값: NULL, 다음에 구현할 예정이다)</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">REQUEST_FAILED</td><td>잘못된 요청으로 웹 서버와 통신할 수 없는 경우에 발생한다. URL이 올바른지 또는 웹 서버가
                  정상적으로 동작하는지 확인한다.</td></tr><tr><td align="left">PKG_TRANSFER_TIMEOUT</td><td>20초 이상 웹 서버로부터 응답이 없을 때 타임아웃이 발생한 경우이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">DECLARE 
    resp VARCHAR2(32767);
BEGIN
    resp := UTL_HTTP.REQUEST('http://www.w3.org/Protocols/');
END;</pre>
        </li></ul></div>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_utl_http_procedure"/>67.6. 프러시저</h2></div></div></div>
    

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_END_RESPONSE"/>67.6.1. END_RESPONSE<a id="d5e31969" class="indexterm"/></h3></div></div></div>
      

      <p>HTTP 요청을 끝낸다. 이때 자원(버퍼 메모리, 소켓)이 모두 반환되고, 초기화 상태로 변경된다.</p>

      <div class="literallayout"><p/></div>

      <p>END_RESPONSE 프러시저<a id="d5e31975" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE END_RESPONSE 
(
    r  IN OUT NOCOPY resp
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">r</td><td>http의 response이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_GET_BODY_CHARSET"/>67.6.2. GET_BODY_CHARSET<a id="d5e32001" class="indexterm"/></h3></div></div></div>
      

      <p>세션에 설정된 기본 메시지 바디 문자 집합의 이름을 가져온다.</p>

      <div class="literallayout"><p/></div>

      <p>GET_BODY_CHARSET 프러시저<a id="d5e32007" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE GET_BODY_CHARSET
(
    charset    OUT NOCOPY VARCHAR2
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">charset</td><td>세션에 설정된 문자 집합 이름(캐노니컬 문자 집합 이름)이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">
DECLARE
  charset varchar(64);
BEGIN
    UTL_HTTP.GET_BODY_CHARSET(charset); <em class="lineannotation"><span class="lineannotation">-- 캐노니컬 문자 집합의 이름 </span></em>
END;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_GET_DETAILED_EXCP_SUPPORT"/>67.6.3. GET_DETAILED_EXCP_SUPPORT<a id="d5e32033" class="indexterm"/></h3></div></div></div>
      

      <p>세션에 설정된 UTL_HTTP 패키지 수행도중 발생하는 에러의 자세한 메시지 출력 여부 정보를 가져온다.</p>

      <div class="literallayout"><p/></div>

      <p>GET_DETAILED_EXCP_SUPPORT 프러시저<a id="d5e32039" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE GET_DETAILED_EXCP_SUPPORT
(
    enable    OUT BOOLEAN
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">enable</td><td>기능 활성화 여부를 나타낸다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">
DECLARE
  enable BOOLEAN;
BEGIN
    UTL_HTTP.GET_DETAILED_EXCP_SUPPORT(enable); <em class="lineannotation"><span class="lineannotation">-- 활성화 여부</span></em>
END;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_GET_TRANSFER_TIMEOUT"/>67.6.4. GET_TRANSFER_TIMEOUT<a id="d5e32065" class="indexterm"/></h3></div></div></div>
      

      <p>현재 세션에 설정되어 있는 타임아웃 시간을 읽어온다. (기본 타임아웃 시간: 50초)</p>

      <div class="literallayout"><p/></div>

      <p>GET_TRANSFER_TIMEOUT 프러시저<a id="d5e32071" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE GET_TRANSFER_TIMEOUT
(
    timeout    OUT PLS_INTEGER
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">timeout</td><td>세션에 설정된 타임아웃 시간이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">DECLARE
      timeout PLS_INTEGER;
BEGIN 
      utl_http.get_transfer_timeout(var);
END;</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_READ_RAW"/>67.6.5. READ_RAW<a id="d5e32096" class="indexterm"/></h3></div></div></div>
      

      <p>헤더를 제외한 요청 페이지의 바디를 바이너리 형태로 읽어온다.</p>

      <div class="literallayout"><p/></div>

      <p>READ_RAW 프러시저<a id="d5e32102" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE READ_RAW
(
    r     IN OUT NOCOPY resp,
    data  OUT NOCOPY RAW,
    len   IN PLS_INTEGER DEFAULT NULL
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">r</td><td>응답 식별자이다.</td></tr><tr><td align="left">data</td><td>헤더를 제외한 바디의 바이너리 형태이다.</td></tr><tr><td align="left">len</td><td><p>0 이상의 값이어야 하며, 최대 읽어올 문자열의 길이이다.</p><p>이때
                  요청한 길이보다 바디가 짧게 남아 있는 경우에는 해당 길이보다 적게 읽어온다.</p></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">BAD_ARGUMENT</td><td>GET_RESPONSE 함수를 선행하지 않고 해당 함수를 호출하거나, 파라미터를 잘못 사용하게
                  되는 경우 발생한다.</td></tr><tr><td align="left">END_OF_BODY</td><td>바디 내용을 모두 읽었는데, 다시 한번 읽기 요청을 하게 되는 경우 발생한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_READ_TEXT"/>67.6.6. READ_TEXT<a id="d5e32152" class="indexterm"/></h3></div></div></div>
      

      <p>헤더를 제외한 요청 페이지의 바디를 읽어온다.</p>

      <div class="literallayout"><p/></div>

      <p>READ_TEXT 프러시저<a id="d5e32158" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE READ_TEXT
(
    r     IN OUT NOCOPY resp,
    data  OUT NOCOPY VARCHAR2,
    len   IN PLS_INTEGER DEFAULT NULL
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">r</td><td>응답 식별자이다.</td></tr><tr><td align="left">data</td><td>헤더를 제외한 바디 문자열이다.</td></tr><tr><td align="left">len</td><td><p>0 이상의 값이어야 하며, 최대 읽어올 문자열의 길이이다.</p><p>이때
                  요청한 길이보다 바디가 짧게 남아 있는 경우에는 해당 길이보다 적게 읽어온다.</p></td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">BAD_ARGUMENT</td><td>GET_RESPONSE 함수를 선행하지 않고 해당 함수를 호출하거나, 파라미터를 잘못 사용하게
                  되는 경우 발생한다.</td></tr><tr><td align="left">END_OF_BODY</td><td>바디 내용을 모두 읽었는데, 다시 한번 읽기 요청을 하게 되는 경우 발생한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_READ_LINE"/>67.6.7. READ_LINE<a id="d5e32208" class="indexterm"/></h3></div></div></div>
      

      <p>헤더를 제외한 요청 페이지의 바디를 한줄 읽어온다.</p>

      <div class="literallayout"><p/></div>

      <p>READ_LINE 프러시저<a id="d5e32214" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE READ_LINE
(
    r             IN OUT NOCOPY resp,
    data          OUT NOCOPY VARCHAR2,
    remove_crlf   IN BOOLEAN DEFAULT FALSE
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">r</td><td>응답 식별자이다.</td></tr><tr><td align="left">data</td><td>헤더를 제외한 바디의 다음 읽어들일 한 라인의 문자열이다.</td></tr><tr><td align="left">remove_crlf</td><td>TRUE일 경우 newline charecter를 제외한 한 라인을 읽어온다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">BAD_ARGUMENT</td><td>GET_RESPONSE 함수를 선행하지 않고 해당 함수를 호출하거나, 파라미터를 잘못 사용하게
                  되는 경우 발생한다.</td></tr><tr><td align="left">END_OF_BODY</td><td>바디 내용을 모두 읽었는데, 다시 한번 읽기 요청을 하게 되는 경우 발생한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_SET_BODY_CHARSET"/>67.6.8. SET_BODY_CHARSET<a id="d5e32262" class="indexterm"/></h3></div></div></div>
      

      <p>HTTP 요청이나 HTTP 응답 메시지 바디의 문자 집합을 지정한다.</p>

      <div class="literallayout"><p/></div>

      <p>SET_BODY_CHARSET<a id="d5e32268" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>CASE1</p>

          <p>HTTP 요청이나 HTTP 응답에 문자 집합(Character Set)을 지정하지 않는 경우 그리고 메시지
          헤더에 Content-Type이 지정되지 않은 경우, 문자 집합을 지정할수 있다. 메시지 헤더에 Content-Type이
          지정된 경우에는 무시된다. 세션 단위로 해당 정보의 설정이 가능하다.</p>

          <div class="itemizedlist"><ul type="circle" compact="compact"><li>
              <p>프로토타입</p>

              <pre class="programlisting">PROCEDURE SET_BODY_CHARSET
(
    charset    IN VARCHAR2 DEFAULT NULL
);</pre>
            </li><li>
              <p>파라미터</p>

              <div class="informaltable">
                <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">charset</td><td><p>문자 집합(캐노니컬 문자 집합)의 이름이다. (기본값:
                      'ISO-8859-1')</p><p>(예: ASCII, UTF-8, EUC-KR,
                      CP949 ... 등) </p></td></tr></tbody></table>
              </div>
            </li></ul></div>
        </li><li>
          <p>CASE2</p>

          <p>HTTP 요청의 헤더에 Content-Type이 지정되지 않은 경우, 바디의 문자 집합을 지정한다. 문자열을
          생략하는 경우, 'ISO-8859-1'로 간주된다. HTTP 요청 메시지 바디는 DB 문자 집합 문자열에서 지정된 문자열
          집합의 문자열로 자동 변환된다. 메시지 헤더에 Content-Type이 지정된 경우에는 무시된다. 한번의 HTTP 요청에
          대하여 설정 가능하다.</p>

          <div class="itemizedlist"><ul type="circle" compact="compact"><li>
              <p>프로토타입</p>

              <pre class="programlisting">PROCEDURE SET_BODY_CHARSET
(
    r          IN OUT NOCOPY req, 
    charset    IN VARCHAR2 DEFAULT NULL
);</pre>
            </li><li>
              <p>파라미터</p>

              <div class="informaltable">
                <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">req</td><td>HTTP 요청이다.</td></tr><tr><td align="left">charset</td><td><p>문자 집합(캐노니컬 문자 집합)의 이름이다. (기본값:
                      'ISO-8859-1')</p><p>(예: ASCII, UTF-8, EUC-KR,
                      CP949 ... 등) </p></td></tr></tbody></table>
              </div>
            </li></ul></div>
        </li><li>
          <p>CASE3</p>

          <p/>

          <p>HTTP 응답의 헤더에 Content-Type이 지정되지 않은 경우, 바디의 문자열로 간주되는 문자열 집합을
          지정한다. 문자열을 생략하는 경우, 'ISO-8859-1'로 간주된다. HTTP 응답 메시지 바디는 지정된 문자열 집합의
          문자열에서 DB 문자 집합 문자열로 자동 변환된다. 메시지 헤더에 Content-Type이 지정된 경우에는 무시된다.
          한번의 HTTP 응답에 대하여 설정 가능하다.</p>

          <div class="itemizedlist"><ul type="circle" compact="compact"><li>
              <p>프로토타입</p>

              <pre class="programlisting">PROCEDURE SET_BODY_CHARSET
(
    r          IN OUT NOCOPY resp, 
    charset    IN VARCHAR2 DEFAULT NULL
);</pre>
            </li><li>
              <p>파라미터</p>

              <div class="informaltable">
                <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">resp</td><td>HTTP 응답이다.</td></tr><tr><td align="left">charset</td><td><p>문자 집합(캐노니컬 문자 집합)의 이름이다. (기본값:
                      'ISO-8859-1')</p><p>(예: ASCII, UTF-8, EUC-KR,
                      CP949 ... 등) </p></td></tr></tbody></table>
              </div>
            </li></ul></div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">BAD_ARGUMENT</td><td>올바른 문자 집합 문자열을 넣지 않는 경우 발생한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">-- HTTP 요청과 응답의 바디 문자 집합을 UTF-8로 변경함 
DECLARE
  req   UTL_HTTP.REQ;
  resp  UTL_HTTP.RESP;
  value varchar(32767);
BEGIN
  req := UTL_HTTP.BEGIN_REQUEST('http://www.naver.com',
                                'GET','HTTP/1.1');
  UTL_HTTP.SET_HEADER(req, 'User-Agent', 'Mozilla/4.0');
  UTL_HTTP.WRITE_TEXT(req, 'test_value');
  UTL_HTTP.SET_BODY_CHARSET(req, 'UTF-8');
  resp := UTL_HTTP.GET_RESPONSE(req);
  UTL_HTTP.SET_BODY_CHARSET(resp, 'UTF-8');
  FOR  i in 1 ..  200000
  LOOP
    UTL_HTTP.READ_TEXT(resp, value);
    DBMS_OUTPUT.PUT_LINE ( value );
  END LOOP;
    UTL_HTTP.END_RESPONSE(resp);
exception when others then
    UTL_HTTP.END_RESPONSE(resp);
end;
/
-- HTTP 요청과 응답에 대한 세션의 기본 문자 집합을 UTF-8로 변경함 
BEGIN
    UTL_HTTP.SET_BODY_CHARSET('UTF-8');
END;
/</pre>
        </li></ul></div>

      <p/>

      <p/>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_SET_DETAILED_EXCP_SUPPORT"/>67.6.9. SET_DETAILED_EXCP_SUPPORT<a id="d5e32367" class="indexterm"/></h3></div></div></div>
      

      <p>세션에 설정된 UTL_HTTP 패키지 수행도중 발생하는 에러의 자세한 메시지 출력 여부를 설정한다.</p>

      <div class="literallayout"><p/></div>

      <p>SET_DETAILED_EXCP_SUPPORT 프러시저<a id="d5e32373" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE SET_DETAILED_EXCP_SUPPORT
(
    enable    OUT BOOLEAN DEFAULT FALSE
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">enable</td><td>기능 활성화 여부를 나타낸다. (기본값: 비활성화)</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">BEGIN
    UTL_HTTP.SET_DETAILED_EXCP_SUPPORT(false); <em class="lineannotation"><span class="lineannotation">-- 비활성화</span></em>
END;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_SET_HEADER"/>67.6.10. SET_HEADER<a id="d5e32399" class="indexterm"/></h3></div></div></div>
      

      <p>서버로 보낼 요청에 헤더를 설정한다. 여러 번 반복 수행하여 추가적인 헤더 정보의 추가가 가능하다.</p>

      <div class="literallayout"><p/></div>

      <p>SET_HEADER 프러시저<a id="d5e32405" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE SET_HEADER 
(
    r      IN OUT NOCOPY req,
    name   IN VARCHAR2,
    value  IN VARCHAR2
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">r</td><td>요청 식별자이다.</td></tr><tr><td align="left">name</td><td>설정할 헤더 이름이다.</td></tr><tr><td align="left">value</td><td>설정할 헤더 값이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_SET_RESPONSE_ERROR_CHECK"/>67.6.11. SET_RESPONSE_ERROR_CHECK<a id="d5e32437" class="indexterm"/></h3></div></div></div>
      

      <p>웹 서버로부터 받은 상태 코드가 에러에 대한 코드일 경우, 이를 GET_RESPONSE GET_RESPONSE에서 상태
      에러를 예외로 처리할 지를 설정하는 프러시저다. 400부터 599까지의 상태 코드가 상태 에러에 해당한다.</p>

      <div class="literallayout"><p/></div>

      <p>SET_RESPONSE_ERROR_CHECK 프러시저<a id="d5e32443" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE SET_RESPONSE_ERROR_CHECK
(
    enable    IN BOOLEAN DEFAULT FALSE
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">enable</td><td>상태 에러 확인 기능 활성화 여부를 나타낸다. (기본값: 비활성화)</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">DECLARE
  req   UTL_HTTP.REQ;
  resp  UTL_HTTP.RESP;
  value VARCHAR2(1024);
BEGIN
  UTL_HTTP.SET_RESPONSE_ERROR_CHECK(enable =&gt; TRUE); <em class="lineannotation"><span class="lineannotation">-- 활성화</span></em>
  req := UTL_HTTP.BEGIN_REQUEST('http://getstatuscode.com/400','GET', 'HTTP/1.1');
  UTL_HTTP.SET_HEADER(req, 'User-Agent', 'Mozilla/4.0');
  resp := UTL_HTTP.GET_RESPONSE(req);
  UTL_HTTP.END_RESPONSE(resp);
END;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_SET_TRANSFER_TIMEOUT"/>67.6.12. SET_TRANSFER_TIMEOUT<a id="d5e32469" class="indexterm"/></h3></div></div></div>
      

      <p>현재 세션에 타임아웃 시간을 설정한다. (기본 타임아웃 시간: 50초)</p>

      <div class="literallayout"><p/></div>

      <p>SET_TRANSFER_TIMEOUT 프러시저<a id="d5e32475" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE SET_TRANSFER_TIMEOUT
(
    timeout    IN PLS_INTEGER
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">timeout</td><td>세션에 설정할 타임아웃 시간이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p><pre class="programlisting">BEGIN 
      utl_http.set_transfer_timeout(30);
END;
/</pre>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="UTL_HTTP_WRITE_TEXT"/>67.6.13. WRITE_TEXT<a id="d5e32500" class="indexterm"/></h3></div></div></div>
      

      <p>서버로 보낼 요청의 바디를 설정한다.</p>

      <div class="literallayout"><p/></div>

      <p>WRITE_TEXT<a id="d5e32506" class="indexterm"/>의 세부 내용은 다음과 같다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>프로토타입</p>

          <pre class="programlisting">PROCEDURE WRITE_TEXT
(
    r     IN OUT NOCOPY REQ,
    data  IN VARCHAR2
);</pre>
        </li><li>
          <p>파라미터</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>설명</th></tr></thead><tbody><tr><td align="left">r</td><td>요청 식별자이다.</td></tr><tr><td align="left">data</td><td>요청 바디의 내용이다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예외 사항</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">예외 사항</th><th>설명</th></tr></thead><tbody><tr><td align="left">BAD_ARGUMENT</td><td>BEGIN_REQUEST 또는 SET_HEADER를 선행하지 않고 해당 함수를 호출하거나,
                  파라미터를 잘못 사용하게 되는 경우 발생한다.</td></tr><tr><td align="left">END_OF_BODY</td><td>바디 내용을 모두 읽었는데, 다시 한번 읽기 요청을 하게 되는 경우 발생한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>예제</p>

          <p>단일 함수 사용의 예가 아니므로, <a href="chap_utl_http.html#sect_utl_http_example" title="67.8. 예제">“67.8. 예제”</a>를
          참고한다.</p>
        </li></ul></div>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_utl_http_url"/>67.7. URL</h2></div></div></div>
    

    <p>URL(Uniform Resource/ Locator)은 서버의 웹 페이지 주소를 나타내는 형태이며, 다음과 같은 형태로
    구성된다.</p>

    <pre class="programlisting">scheme://[user[password]@]host[:port]/[...]</pre>

    <p>다음은 각 항목에 대한 설명이다.</p>

    <div class="informaltable">
      <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">항목</th><th>설명</th></tr></thead><tbody><tr><td align="left">scheme</td><td>http와 https가 있으며, https는 다음에 구현할 예정이다.</td></tr><tr><td align="left">user</td><td>proxy를 위해 존재하며, 다음에 구현할 예정이다.</td></tr><tr><td align="left">password</td><td>proxy를 위해 존재하며, 다음에 구현할 예정이다.</td></tr><tr><td align="left">host</td><td>HTTP 서버 호스트 이름이다.</td></tr><tr><td align="left">port</td><td>통신에 사용할 포트 번호이다.</td></tr></tbody></table>
    </div>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_utl_http_example"/>67.8. 예제</h2></div></div></div>
    

    <p>다음은 BEGIN_REQUEST, GET_RESPONSE,END_RESPONSE, READ_RAW를 이용하여
    www.example.com에 있는 image.jpg를 읽어오는 예시이다.</p>

    <pre class="programlisting">DECLARE
  req   UTL_HTTP.REQ;
  resp  UTL_HTTP.RESP;
  value RAW(1024);
BEGIN
  req := UTL_HTTP.BEGIN_REQUEST('http://www.example.com/image.jpg', 
                                'GET', 'HTTP/1.1');
  resp := UTL_HTTP.GET_RESPONSE(req);

  LOOP
    UTL_HTTP.READ_RAW(resp, value);
    DBMS_OUTPUT.PUT_LINE ( value );
  END LOOP;
EXCEPTION
  WHEN UTL_HTTP.END_OF_BODY THEN
  UTL_HTTP.END_RESPONSE(resp);
END;
/</pre>

    <p>다음은 BEGIN_REQUEST, SET_HEADER, WRITE_TEXT, GET_RESPONSE,
    END_RESPONSE, READ_TEXT를 이용하여 ims.tmaxsoft.com의 로그인 웹 페이지의 html 스크립트를 읽어오는
    예이다.</p>

    <pre class="programlisting">DECLARE
  req   UTL_HTTP.REQ;
  resp  UTL_HTTP.RESP;
  value VARCHAR2(1024);
BEGIN
req := UTL_HTTP.BEGIN_REQUEST('http://ims.tmaxsoft.com/tody/auth/login.do', 
                              'POST', 'HTTP/1.1');
  UTL_HTTP.SET_HEADER(req, 'User-Agent', 'Mozilla/4.0');
  UTL_HTTP.WRITE_TEXT(req, 'test_value');
  resp := UTL_HTTP.GET_RESPONSE(req);

  LOOP
    UTL_HTTP.READ_TEXT(resp, value);
    DBMS_OUTPUT.PUT_LINE ( value );
  END LOOP;
EXCEPTION
  WHEN UTL_HTTP.END_OF_BODY THEN
  UTL_HTTP.END_RESPONSE(resp);
END;
/</pre>

    <p>다음은 BEGIN_REQUEST, SET_HEADER, WRITE_TEXT, GET_RESPONSE,
    END_RESPONSE, READ_LINE을 이용하여 ims.tmaxsoft.com의 로그인 웹 페이지의 html 스크립트를 읽어오는
    예이다.</p>

    <pre class="programlisting">DECLARE
  req   UTL_HTTP.REQ;
  resp  UTL_HTTP.RESP;
  value VARCHAR2(1024);
BEGIN
req := UTL_HTTP.BEGIN_REQUEST('http://ims.tmaxsoft.com/tody/auth/login.do', 
                              'POST', 'HTTP/1.1');
  UTL_HTTP.SET_HEADER(req, 'User-Agent', 'Mozilla/4.0');
  UTL_HTTP.WRITE_TEXT(req, 'test_value');
  resp := UTL_HTTP.GET_RESPONSE(req);

  LOOP
    UTL_HTTP.READ_LINE(resp, value, true);
    DBMS_OUTPUT.PUT_LINE ( value );
  END LOOP;
EXCEPTION
  WHEN UTL_HTTP.END_OF_BODY THEN
  UTL_HTTP.END_RESPONSE(resp);
END;
/</pre>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chap_utl_file.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chap_utl_i18n.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제66장 UTL_FILE </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제68장 UTL_I18N</td></tr></table></div><div xmlns="" align="center"/></body></html>