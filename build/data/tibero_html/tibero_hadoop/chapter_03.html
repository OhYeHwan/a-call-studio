<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제3장 HBase Connector의 사용</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero Hadoop Connector 안내서"/><link rel="up" href="index.html" title="Tibero Hadoop Connector 안내서"/><link rel="prev" href="chapter_02.html" title="제2장 HDFS Connector의 사용"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제3장 HBase Connector의 사용</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chapter_02.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> </td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chapter_03"/>제3장 HBase Connector의 사용</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chapter_03.html#d5e443">3.1. HBase External Table 생성</a></span></dt><dt><span class="section"><a href="chapter_03.html#d5e487">3.2. HBase External Table 질의</a></span></dt><dt><span class="section"><a href="chapter_03.html#d5e511">3.3. HBase External Table INSERT</a></span></dt><dt><span class="section"><a href="chapter_03.html#d5e532">3.4. HBase External Table DELETE</a></span></dt></dl></div>
  

  <p>본 장에서는 <span>Tibero</span> HBase Connector의 사용 방법에 대해서
  설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e443"/>3.1. HBase External Table 생성</h2></div></div></div>
    

    <p>HBase에 있는 Table에 질의를 수행하기 위해서는 Tibero Infinidata에 HBase의 해당 테이블에
    접근하기 위한 External Table을 생성해야 한다. HBase에 해당 테이블이 없을 경우 External Table을 생성할
    때 HBase에 Table을 생성하지 않으며, 이런 경우 질의를 수행할 때 에러가 발생한다.</p>

    <p>다음은 HBase External Table의 생성 방법 및 생성 예이다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>생성 방법</p>

        <pre class="programlisting">CREATE TABLE <span class="emphasis"><em>table_name</em></span> 
organization HBase (
    access ('<span class="emphasis"><em>HBase_table_name</em></span>')
    location ('<span class="emphasis"><em>ip:port</em></span>')
)</pre>

        <div class="informaltable">
          <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">항목 </th><th>설명</th></tr></thead><tbody><tr><td align="left"><span class="emphasis"><em>table_name</em></span></td><td><span>Tibero</span>에서 사용될 테이블 이름이다.</td></tr><tr><td align="left"><span class="emphasis"><em>HBase_table_name</em></span></td><td>연결할 HBase의 테이블 이름이다.</td></tr><tr><td align="left"><span class="emphasis"><em>ip</em></span></td><td>zookeeper의 IP 주소 또는 hosts이다.</td></tr><tr><td align="left"><span class="emphasis"><em>port</em></span></td><td>zookeeper의 포트 번호이다.</td></tr></tbody></table>
        </div>

        <p/>
      </li><li>
        <p>생성 예</p>

        <p>다음은 zookeeper가 hbase01(또는 IP 주소 192.1.1.2) 및 포트 번호 2181로 설치되어
        있고, HBase에 HT 테이블이 있을 때 연결할 External Table로 TB_HT를 생성하는 예이다.</p>

        <pre class="programlisting">CREATE TABLE TB_HT
organization HBase (
    access ('HT')
    location ('hbase01:2181')
);</pre>

        <p>또는</p>

        <pre class="programlisting">CREATE TABLE TB_HT
organization HBase (
    access ('HT')
    location ('192.1.1.2:2181')
);</pre>
      </li></ul></div>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e487"/>3.2. HBase External Table 질의</h2></div></div></div>
    

    <p>HBase External Table에 질의는 일반 테이블과 동일하게 SQL로 수행된다. 단, 일반 테이블과 다른 점은
    컬럼을 지정하는 부분에 컬럼과 함께 column-family를 같이 사용해야 한다. 하지만 rowkey 컬럼은
    column-family가 없이 rowkey로 사용이 가능하다.</p>

    <pre class="programlisting">columns-family$column-name</pre>

    <p/>

    <p>다음은 HBase External Table에 질의할 때 주의해야 할 사항이다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>HBase External Table의 Column-family와 컬럼을 미리 인지하고 있어야 한다.
        Column-family를 잘못 사용하는 경우에는 에러가 발생하지만 컬럼을 잘못 사용하는 경우에는 에러가 발생하지 않고 결과가
        NULL로 나오기 때문이다.</p>
      </li><li>
        <p>HBase에서는 대소문자를 구분하기 때문에 컬럼 이름이나 Column-family가 소문자이면 큰따옴표(" ")를
        사용해야 한다.</p>
      </li><li>
        <p>SQL SELECT 절에 존재하는 컬럼이 없는 row일 경우 <span>Tibero</span>와 다르게 해당 row는 결과에 포함되지 않는다.</p>
      </li><li>
        <p>현재 <span>Tibero</span>에서는 timestamp에 대한 조건은 지원하지 않는다.
        가장 최근의 row만 질의가 가능하다.</p>
      </li><li>
        <p>HBase External Table에 대해 SELECT 절에 애스터리스크(*)는 현재 지원하지
        않는다.</p>
      </li></ul></div>

    <p/>

    <div class="literallayout"><p/></div>

    <p>다음은 HBase External Table TB_HT에 대해 질의하는 예이다.</p>

    <pre class="programlisting">TMC&gt; SELECT rowkey, CF1$COL1, CF2$COL2 FROM TB_HT;
TMC&gt; SELECT rowkey, CF1$COL1, CF2$COL2 FROM TB_HT WHERE CF1$COL1 &gt; 5;
TMC&gt; SELECT rowkey, "cf1$col1", CF2$COL2 
     FROM TB_HT WHERE "cf1$col1" &gt; 5 and CF1$COL3 = 2;</pre>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e511"/>3.3. HBase External Table INSERT</h2></div></div></div>
    

    <p>HBase External Table에 대한 INSERT도 질의와 마찬가지로 일반 테이블과 동일하게 SQL로 수행된다.
    단, 일반 테이블과 다른 점은 INSERT 대상 테이블의 컬럼을 명시적으로 지정해야 되고, 컬럼을 지정하는 부분에 컬럼과 함께
    column-familly를 같이 명시해야 한다.</p>

    <pre class="programlisting">Column-family$column-name</pre>

    <p/>

    <p>다음은 HBase External Table에 INSERT할 때 주의해야 할 사항이다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>rowkey 컬럼은 항상 포함되어야 한다.</p>
      </li><li>
        <p>HBase External Table의 Column-family와 컬럼을 미리 인지하고 있어야 한다.
        Column-family를 잘못 사용하는 경우에는 에러가 발생한다.</p>
      </li><li>
        <p>HBase에서는 대소문자를 구분하기 때문에 컬럼 이름이나 Column-family가 소문자이면 큰따옴표(" ")를
        사용해야 한다.</p>
      </li><li>
        <p>INSERT할 테이블에 이미 같은 rowkey가 있는 경우 update로 처리된다.</p>
      </li><li>
        <p>HBase External Table에 대한 트랜잭션은 지원되지 않는다.</p>
      </li></ul></div>

    <p/>

    <div class="literallayout"><p/></div>

    <p>다음은 HBase External Table TB_HT에 대해 INSERT하는 예이다.</p>

    <pre class="programlisting">TMC&gt; INSERT INTO TB_HT (rowkey, CF1$COL1, CF1$COL2) values (1,2,3);
TMC&gt; INSERT INTO TB_HT (rowkey, "CF1$col3", "CF2$col4") values (2,4,1);
TMC&gt; INSERT INTO TB_HT (rowkey, CF1$COL1, CF1$COL2) 
SELECT level, level + 1, level + 2
FROM dual connect by level &lt;= 1000;</pre>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e532"/>3.4. HBase External Table DELETE</h2></div></div></div>
    

    <p>HBase External Table에 대한 DELETE도 질의와 마찬가지로 일반 테이블과 동일하게 SQL로
    수행된다.</p>

    <p>다음은 HBase Table에 DELETE할 때 주의해야 할 사항이다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>HBase Table의 Column-family와 컬럼을 미리 인지하고 있어야 한다. Column-family를
        잘못 사용하는 경우에는 에러가 발생한다.</p>
      </li><li>
        <p>HBase에서는 대소문자를 구분하기 때문에 컬럼 이름이나 Column-family가 소문자이면 큰따옴표(" ")를
        사용해야 한다.</p>
      </li><li>
        <p>최신 row에 지워졌다고 marking만 하기 때문에 HBase table에 저장된 용량은 변화가
        없다.</p>
      </li><li>
        <p>HBase External Table에 대한 트랜잭션은 지원되지 않는다.</p>
      </li></ul></div>

    <p/>

    <div class="literallayout"><p/></div>

    <p>다음은 HBase External Table TB_HT에 대해 DELETE하는 예이다.</p>

    <pre class="programlisting">TMC&gt; DELETE FROM TB_HT;
TMC&gt; DELETE FROM TB_HT WHERE rowkey = 1;
TMC&gt; DELETE FROM TB_HT WHERE CF1$COL1 = 2;
TMC&gt; DELETE FROM TB_HT WHERE CF1$COL1 = 2 and "CF1$col3" = 2;</pre>

    <p/>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chapter_02.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> </td></tr><tr><td width="40%" align="left" valign="top">제2장 HDFS Connector의 사용 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> </td></tr></table></div><div xmlns="" align="center"/></body></html>