<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제1장 TAS 소개</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero Active Storage 관리자 안내서"/><link rel="up" href="index.html" title="Tibero Active Storage 관리자 안내서"/><link rel="prev" href="pr01.html" title="안내서에 대하여"/><link rel="next" href="chapter_admin_instance.html" title="제2장 TAS 인스턴스 관리"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제1장 <span xmlns="http://www.w3.org/1999/xhtml">TAS</span> 소개</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="pr01.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chapter_admin_instance.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chapter_tas_overview"/>제1장 <span>TAS</span> 소개</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chapter_tas_overview.html#d5e273">1.1. 개요</a></span></dt><dt><span class="section"><a href="chapter_tas_overview.html#d5e301">1.2. <span>TAS</span> 개념</a></span></dt><dd><dl><dt><span class="section"><a href="chapter_tas_overview.html#sect_instance">1.2.1. <span>TAS</span> 인스턴스</a></span></dt><dt><span class="section"><a href="chapter_tas_overview.html#sect_diskspace">1.2.2. <span>TAS</span> 디스크 스페이스</a></span></dt><dt><span class="section"><a href="chapter_tas_overview.html#sect_mirroring_fg">1.2.3. 미러링과 실패 그룹</a></span></dt><dt><span class="section"><a href="chapter_tas_overview.html#sect_disk">1.2.4. <span>TAS</span> 디스크</a></span></dt><dt><span class="section"><a href="chapter_tas_overview.html#sect_file">1.2.5. <span>TAS</span> 파일</a></span></dt></dl></dd><dt><span class="section"><a href="chapter_tas_overview.html#d5e557">1.3. <span>TAS</span> 프로세스</a></span></dt></dl></div>
  

  <p>본 장에서는 <span>TAS</span>의 개념과 기능을 개략적으로 설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e273"/>1.1. 개요</h2></div></div></div>
    

    <p><span>TAS</span>는 별도의 외부 솔루션 없이 직접 디스크 장치를 관리하여 <span>Tibero</span> 운용에 필요한 데이터 파일, 로그 파일 등을 저장하기 위한 논리 볼륨
    관리자(Logical Volume Manager)와 파일 시스템이다. 또한 공유 디스크를 사용할 경우 <span>Tibero Active Cluster</span>(이하 <span>TAC</span>)기능을
    사용할 수 있도록 클러스터링 기능을 제공한다.</p>

    <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
      <p><span>TAC</span>에 대한 자세한 내용은 "<span>Tibero</span> 관리자 안내서"를 참고한다.</p>
    </div>

    <div class="literallayout"><p/></div>

    <p><span>TAS</span>는 여러 개의 디스크들을 <span><strong class="guibutton">디스크
    스페이스</strong></span><a id="d5e288" class="indexterm"/>로 관리한다. 디스크 스페이스는 논리 볼륨 위에 파일 시스템을 생성한 것과 유사하며, <span>Tibero</span>는 이러한 디스크 스페이스에 파일들을 저장한다.</p>

    <p>디스크 스페이스를 사용해서 <span>Tibero</span>를 운용하는 도중에 디스크를 추가하거나 제거할 수 있다. 디스크를
    추가/제거할 경우 <span>TAS</span>는 자동으로 디스크 스페이스에 있는 모든 디스크들을 공평하게 사용할 수 있도록
    저장된 내용을 재배치한다. 디스크 스페이스 관리에 대한 자세한 내용은 <a href="chapter_admin_diskspace.html" title="제3장 TAS 디스크 스페이스 관리">“제3장 <span>TAS</span> 디스크 스페이스 관리”</a>를 참고한다.</p>

    <p><span>TAS</span>는 <span>Tibero</span>의 데이터에 대한 미러링 기능을 제공한다. 크게 2개의 복제본을 가지는
    2-way 방식(NORMAL option)과 3개의 복제본을 가지는 3-way(HIGH option)방식을 지원한다. 별도의 미러링
    솔루션을 사용하고 있다면 <span>TAS</span>의 미러링 기능을 사용하지 않을 수도(EXTERNAL option)
    있다.</p>

    <p/>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e301"/>1.2. <span>TAS</span> 개념</h2></div></div></div>
    

    <p>본 절에서는 <span>TAS</span>를 이해하는데 필요한 주요 개념들에 대해 설명한다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p><a href="chapter_tas_overview.html#sect_instance" title="1.2.1. TAS 인스턴스"><span>TAS</span>
        인스턴스</a></p>
      </li><li>
        <p><a href="chapter_tas_overview.html#sect_diskspace" title="1.2.2. TAS 디스크 스페이스"><span>TAS</span>
        디스크 스페이스</a></p>
      </li><li>
        <p><a href="chapter_tas_overview.html#sect_mirroring_fg" title="1.2.3. 미러링과 실패 그룹">미러링과 실패 그룹</a></p>
      </li><li>
        <p><a href="chapter_tas_overview.html#sect_disk" title="1.2.4. TAS 디스크"><span>TAS</span>
        디스크</a></p>
      </li><li>
        <p><a href="chapter_tas_overview.html#sect_file" title="1.2.5. TAS 파일"><span>TAS</span>
        파일</a></p>
      </li></ul></div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_instance"/>1.2.1. <span>TAS</span> 인스턴스<a id="d5e329" class="indexterm"/></h3></div></div></div>
      

      <p><span>TAS</span>는 <span>Tibero</span>를 기반으로 만들어졌다. 그러므로 <span>TAS</span>
      인스턴스를 기동하면 <span>Tibero</span>와 거의 동일한 프로세스들이 실행된다. 하지만 <span>TAS</span>는
      데이터베이스보다 적은 양의 일을 수행하므로 시스템 자원을 거의 사용하지 않는다. <span>TAS</span>
      인스턴스 관리에 대한 자세한 내용은 <a href="chapter_admin_instance.html" title="제2장 TAS 인스턴스 관리">“제2장 <span>TAS</span> 인스턴스 관리”</a>를
      참고한다.</p><div class="literallayout"><p/></div>

      <p><span>TAS</span>는 디스크 스페이스와 파일 정보등을 기록하기 위한 메타 데이터를 첫 번째
      디스크 스페이스에 저장하고 관리한다.</p>

      <p><span>TAS</span> 메타 데이터는 다음과 같은 정보들을 저장한다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>디스크 스페이스에 속한 디스크</p>
        </li><li>
          <p>디스크 공간 할당 정보</p>
        </li><li>
          <p>파일과 파일의 별칭</p>
        </li><li>
          <p>파일의 익스텐트 정보</p>
        </li><li>
          <p><span>TAS</span>  메타 데이터를 위한 로그</p>
        </li></ul></div>

      <div class="literallayout"><p/></div>

      <p>다음 그림은 <span>TAS</span> 인스턴스와 <span>Tibero</span>, 디스크 사이의 관계를 보여준다. <span>Tibero</span>는 <span>TAS</span>를
      통해서 파일을 읽고 쓰는 것이 아니라, 파일의 메타 정보를 사용해서 직접 디스크를 읽고 쓴다. 그러기 위해 <span>Tibero</span>는 <span>TAS</span>로부터
      파일의 메타 정보를 받아온다.</p>

      <div class="figure"><a id="fig_instance"/><p class="title"><b>[그림 1.1] <span>TAS</span>를 사용한 <span>Tibero</span> 구성</b></p><div class="figure-contents">
        

        <div xmlns="" class="mediaobject" align="left"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="350"><tr><td align="left"><img src="resources/TAS_instance.png" align="top" width="350" alt="TAS를 사용한 Tibero 구성"/></td></tr></table></div>
      </div></div><br class="figure-break"/>

      <p><span>TAS</span>는 공유 디스크를 사용하기 위한 클러스터링 기능을 제공한다. 하나의 디스크
      스페이스는 하나의 <span>Tibero</span> 인스턴스만 사용할 수 있다. 여러 <span>Tibero</span> 인스턴스가 하나의 디스크 스페이스를 사용하려면 해당 인스턴스들을
      <span>TAC</span>로 구성해야 한다.</p>

      <p>다음은 클러스터 기능을 사용한 <span>Tibero</span>와 <span>TAS</span>의
      구성을 설명한다.</p>

      <div class="figure"><a id="fig_instance_cluster"/><p class="title"><b>[그림 1.2] <span>TAS</span> 클러스터링 기능을 사용한 <span>Tibero</span>와 <span>TAC</span>
        구성</b></p><div class="figure-contents">
        

        <div xmlns="" class="mediaobject" align="left"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="600"><tr><td align="left"><img src="resources/TAS_instance_cluster.png" align="top" width="600" alt="TAS 클러스터링 기능을 사용한 Tibero와 TAC 구성"/></td></tr></table></div>
      </div></div><br class="figure-break"/>

      <p/>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_diskspace"/>1.2.2. <span>TAS</span> 디스크 스페이스<a id="d5e393" class="indexterm"/></h3></div></div></div>
      

      <p>디스크 스페이스는 여러 개의 디스크들로 이루어져있다. 각각의 디스크 스페이스는 해당 디스크 스페이스를 관리하는데 필요한
      메타 데이터와 데이터베이스에서 사용하는 파일들을 저장하고있다. 디스크 스페이스 관리에 대한 자세한 내용은 <a href="chapter_admin_diskspace.html" title="제3장 TAS 디스크 스페이스 관리">“제3장 <span>TAS</span> 디스크 스페이스 관리”</a>를 참고한다.</p>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_mirroring_fg"/>1.2.3. 미러링과 실패 그룹<a id="d5e400" class="indexterm"/></h3></div></div></div>
      

      <p><span>TAS</span>는 디스크 스페이스에 저장된 데이터에 대한 미러링 기능을 제공한다. 미러링은
      데이터의 복사본을 여러 디스크에 저장하여 데이터를 보호하는 방법이다.</p>

      <p>미러링 기능을 사용하기 위해 디스크 스페이스를 생성할 때 다음과 같은 중복 레벨을 설정할 수 있다.<a id="d5e405" class="indexterm"/></p>

      <div class="informaltable">
        <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">레벨</th><th>미러링 구분</th></tr></thead><tbody><tr><td align="left">NORMAL<a id="d5e417" class="indexterm"/><a id="d5e419" class="indexterm"/></td><td>2-way 미러링</td></tr><tr><td align="left">HIGH<a id="d5e425" class="indexterm"/><a id="d5e427" class="indexterm"/></td><td>3-way 미러링</td></tr><tr><td align="left">EXTERNAL<a id="d5e433" class="indexterm"/><a id="d5e435" class="indexterm"/></td><td>미러링하지 않음</td></tr></tbody></table>
      </div>

      <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
        <p>디스크 스페이스를 <span><strong class="guibutton">EXTERNAL</strong></span> 중복 레벨로 생성한 경우 해당 디스크
        스페이스는 미러링과 관련된 모든 기능을 사용할 수 없다.</p>
      </div>

      <div class="literallayout"><p/></div>

      <p>미러링된 파일에서 사용할 익스텐트를 할당할 때 파일의 중복 레벨에 따라 익스텐트를 여러 개(2개 또는 3개)를
      할당한다. 이때 각 익스텐트를 할당할 디스크를 서로 다른 <span><strong class="guibutton">실패 그룹</strong></span>에서 선택한다. 이렇게
      함으로써 특정 실패 그룹에 속한 디스크 혹은 실패 그룹 전체에 장애가 발생하더라도 데이터 손실이 없으며, 해당 디스크 스페이스에
      대한 서비스를 중단 없이 제공할 수 있다.</p>

      <p>실패 그룹<a id="d5e446" class="indexterm"/>은 디스크 스페이스를 생성할 때 정의하며, 생성할 때 설정한 중복 레벨은 나중에 변경할 수 없다. 실패
      그룹 정의를 생략하면 자동으로 각 디스크를 실패 그룹으로 정의한다. 중복 레벨이
      <span><strong class="guibutton">NORMAL</strong></span>, <span><strong class="guibutton">HIGH</strong></span>인 디스크 스페이스는 각각
      최소 2개, 3개의 실패 그룹을 정의해야 한다. 중복 레벨이 <span><strong class="guibutton">EXTERNAL</strong></span>인 디스크
      스페이스는 실패 그룹을 사용하지 않는다.</p>

      <p/>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_disk"/>1.2.4. <span>TAS</span> 디스크<a id="d5e455" class="indexterm"/></h3></div></div></div>
      

      <p><span>TAS</span>는 다음 디스크 장치들을 <span>TAS</span>
      디스크로 사용할 수 있다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>디스크 전체</p>
        </li><li>
          <p>디스크 파티션</p>
        </li><li>
          <p>논리 볼륨</p>
        </li></ul></div>

      <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
          <p>위는 모두 OS 입장에서 I/O가 가능한 LUN의 형태로 보여지는 존재이다. 위의 3가지 타입에 대하여 모두
          지원가능하다. 현재 Active Storage는 Linux, AIX 운영체제를 지원하고 있다.</p>
        </div><div class="literallayout"><p/></div>

      <p>디스크나 Physical Volume에 대한 권한 문제는 <span><strong class="guibutton">udev</strong></span>를 통하여
      디바이스 노드를 생성하여 해결할 수 있다.</p>

      <p>SAN 스토리지 상에서 처음부터 LUN으로 나눠진 디스크에 대해서는 클러스터링 S/W 및 GFS2 없이 TAS 클러스터
      구성이 가능하다.</p>

      <p><span>TAS</span> 클러스터 구성할 때 동일한 디스크가 각 노드에서 서로 다른 이름으로
      설정되어도 <span>TAS</span> 디스크로 사용할 수 있다. 예를 들어 같은 디스크라도 CLVM이 없다면
      1번 node에서 /dev/hdisk1로 보이고 2번 node에서 /dev/hdisk2로 보일 수 있는데 <span>TAS</span>로
      구성할 때 이러한 환경에서도 정상적으로 DB를 구성할 수 있다. disk string을 통하여 이러한 <span>TAS</span>
      디스크를 검색하게 되므로 클러스터에 참여하는 노드들이 필요한 disk/raw device를 볼 수 있도록만 설정해 주면
      된다.</p>

      <p><span>TAS</span>는 파일의 내용을 디스크 스페이스에 속한 모든 디스크들에 분산 저장한다.
      이러한 저장 방식은 디스크 스페이스에 속한 모든 디스크들의 공간을 균일하게 사용하도록 하며, 모든 디스크들에 동일한 입출력 부하가
      가해지도록 한다. 그러므로 디스크 스페이스를 구성하는 <span>TAS</span>
      디스크들은 물리적으로 서로 다른 디스크 장치여야 한다. RAID로 Logical Volume 구성할 때 striping size가
      <span>TAS</span>의 AU size의 배수가 되도록 하는 것을 권장한다. 이렇게 해야 디스크의
      strping 단위와 <span>TAS</span>의 striping 단위의 align이 맞게 되어 성능이
      향상된다.</p>

      <p/>

      <div class="literallayout"><p/></div>

      

      <h4><a id="sect_au"/>할당 단위<a id="d5e490" class="indexterm"/></h4>

      <p>디스크 스페이스에 속한 모든 디스크들의 공간은 할당 단위로 나누어진다. 할당 단위는 디스크 스페이스에서 공간 할당에
      사용하는 기본 단위이다. 하나의 파일 익스텐트는 한 개 혹은 여러 개의 할당 단위를 사용하며, 하나의 파일은 한 개 혹은 여러
      개의 익스텐트를 사용한다.</p>

      <p>디스크 스페이스에서 사용할 할당 단위의 크기는 디스크 스페이스를 생성할 때
      <span><strong class="guibutton">AU_SIZE</strong></span><a id="d5e495" class="indexterm"/>속성으로 설정할 수 있으며, 설정 가능한 값은 1, 2, 4, 8, 16, 32 또는
      64MB이다.</p>

      <p/>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_file"/>1.2.5. <span>TAS</span> 파일<a id="d5e501" class="indexterm"/></h3></div></div></div>
      

      <p><span>TAS</span>의 디스크 스페이스에 저장된 파일들을 <span>TAS</span>
      파일이라고 한다. <span>Tibero</span>는 <span>TAS</span>에게
      파일 정보를 요청하며, 이는 <span>Tibero</span>가 일반 파일 시스템의 파일을 사용하는 것과 비슷하다.</p>

      <p><span>TAS</span> 파일의 이름은 '+{<span class="emphasis"><em>디스크 스페이스
      이름</em></span>}/...' 형태이며, 파일 정보에 포함되지 않고 별칭으로 관리한다.</p>

      <p/>

      <div class="literallayout"><p/></div>

      <p/>

      <h4><a id="sect_extent"/>익스텐트(Extent)<a id="d5e519" class="indexterm"/></h4>

      <p><span>TAS</span> 파일들은 익스텐트들의 집합으로 디스크 스페이스에 저장된다. 각 익스텐트는
      디스크 스페이스에 속한 각 디스크에 저장되어있으며, 한 개 혹은 여러 개의 할당 단위를 사용한다. <span>TAS</span>는 큰
      크기의 파일을 지원하기 위해 동일 파일 내에서 파일 크기에 따라 익스텐트 크기를 변경한다.</p>

      <p>익스텐트 크기를 변경하는 것은 파일 익스텐트 정보를 유지하기 위한 메모리 사용을 줄이는 효과도 있다. 익스텐트의 크기는
      파일의 크기가 커짐에 따라 자동으로 커지게 된다. 파일 크기가 작을 때는 디스크 스페이스의 할당 단위(Allocation
      Unit, 이하 AU)와 동일하며, 파일 크기가 커지면 4AU나 16AU의 크기가 된다.</p>

      <p>익스텐트 크기는 아래와 같이 변경된다.</p>

      <div class="informaltable">
        <table border="1"><colgroup><col width="200" align="left"/><col/></colgroup><thead><tr><th align="left">파일의 익스텐트 개수</th><th>익스텐트 크기</th></tr></thead><tbody><tr><td align="left">20000개 이하</td><td>1AU</td></tr><tr><td align="left">20000 ~ 40000</td><td>4AU</td></tr><tr><td align="left">40000 개 이상</td><td>16AU</td></tr></tbody></table>
      </div>

      <p/>

      <p/>

      <div class="literallayout"><p/></div>

      <p>다음은 익스텐트와 할당 단위의 관계를 보여준다.</p>

      <p/>

      <div class="figure"><a id="fig_extent"/><p class="title"><b>[그림 1.3] <span>TAS</span> 파일 할당<a id="d5e551" class="indexterm"/></b></p><div class="figure-contents">
        

        <div xmlns="" class="mediaobject" align="left"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="580"><tr><td align="left"><img src="resources/TAS_extent.png" align="top" width="580" alt="TAS 파일 할당 TAS 파일 할당"/></td></tr></table></div>
      </div></div><br class="figure-break"/>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e557"/>1.3. <span>TAS</span> 프로세스</h2></div></div></div>
    

    <p><span>TAS</span>를 사용할 때는 추가적으로 ASSD(Active Storage Service
    Daemon) 프로세스를 실행한다. ASSD 프로세스는 TAC-TAS간의 통신 기능을 수행한다. 이 프로세스 내에서 실행되는 스레드는
    다음과 같다.</p>

    <div class="informaltable">
      <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">스레드</th><th>역할</th></tr></thead><tbody><tr><td align="left">COMM</td><td>ASSD 컨트롤 스레드가 받은 메시지를 실질적으로 처리하는 역할을 한다. DB에서 정보를 요청하는 메시지를
            보내거나 TAS에서 요청을 처리하고 결과를 반환한다.</td></tr><tr><td align="left">DMON</td><td>지속적으로 디스크에 접근 가능한 상태인지 체크한다. 일정 횟수 이상 접근이 불가능하면 FAIL 처리하였다가
            접근이 가능해지면 리싱크 작업을 수행한다. 이 스레드는 모든 TAS 노드들 중 하나를 선정해 해당 노드에서만 실행되고,
            이 노드를 TAS 마스터 노드라고 한다. 마스터 노드가 어떠한 이유로 FAIL되면 다른 TAS 중 하나가 마스터 노드가
            된다.</td></tr><tr><td align="left">RBAL</td><td>리밸런스 작업을 수행하기 위해 필요한 작업들을 생성해 후술할 RBSL 스레드에 전달한다.</td></tr><tr><td align="left">RBSL</td><td>RBAL 스레드로부터 리밸런스에 필요한 작업을 넘겨받아 실행한다.</td></tr></tbody></table>
    </div>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="pr01.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chapter_admin_instance.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">안내서에 대하여 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제2장 <span>TAS</span> 인스턴스 관리</td></tr></table></div><div xmlns="" align="center"/></body></html>