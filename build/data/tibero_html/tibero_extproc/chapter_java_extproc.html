<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제6장 Java External Procedure</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero External Procedure 안내서"/><link rel="up" href="index.html" title="Tibero External Procedure 안내서"/><link rel="prev" href="chapter_extproc_util.html" title="제5장 C External Procedure 유틸리티"/><link rel="next" href="chapter_java_extproc_create.html" title="제7장 Java External Procedure 생성"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제6장 Java External Procedure</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chapter_extproc_util.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="chapter_java_extproc_create.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chapter_java_extproc"/>제6장 Java External Procedure</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chapter_java_extproc.html#d5e1235">6.1. 특징</a></span></dt><dt><span class="section"><a href="chapter_java_extproc.html#sect_java_ep_flow">6.2. 동작 과정</a></span></dt></dl></div>
  

  <p>본 장에서는 Java External Procedure의 특징과 동작 과정을 설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e1235"/>6.1. 특징</h2></div></div></div>
    

    <p>Java External Procedure는 다음과 같은 특징이 있다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>임의의 Java 클래스를 호출할 수 있다.</p>

        <p>Java에서 동적으로 호출할 수 있는 클래스를 작성하는 경우 Java External Procedure를 이용하여
        호출할 수 있다.</p>
      </li><li>
        <p><span>Tibero</span> 서버와 다른 메모리 영역에서 수행된다.</p>

        <p>사용자가 작성한 클래스(이하 <span><strong class="guibutton">사용자 Java 클래스</strong></span>)는 <span>Tibero</span> 서버의 프로세스(이하 서버 프로세스)가 아닌 <span><strong class="guibutton">JEPA</strong></span>(Java
        External Procedure Agent)<a id="d5e1249" class="indexterm"/> 프로세스에 의해 동적으로 로드된다.<a id="d5e1251" class="indexterm"/></p>

        <p>JEPA 프로세스의 메모리 영역에서 사용자 Java 클래스가 수행되므로, 수행 중에 에러가 발생 하더라도 서버
        프로세스에는 영향을 주지 않는다.</p>
      </li><li>
        <p>권한을 부여할 수 있다.</p>

        <p>사용자 Java 클래스는 서버에 하나의 객체로 등록되므로, DDL 문장과 관련된 권한을 설정할 수 있다. 또한
        PSM 함수와도 대응되므로 실행 권한도 설정할 수 있다.</p>
      </li><li>
        <p>Java External Procedure는 현재 트랜잭션에 포함된다.</p>

        <p><span>Tibero</span> 서버에서 클라이언트의 요청을 수행하는 중에 Java
        External Procedure의 실행이 요청되면 JEPA 프로세스는 그 요청을 처리해 줄 때까지 대기한다.</p>

        <p>Java External Procedure는 현재 트랜잭션에 포함되어 실행되며, 실행 결과에 따라 현재 트랜잭션을
        커밋 또는 롤백시킬 수 있다.</p>
      </li><li>
        <p>JDBC API를 사용하여 현재 트랜잭션에 SQL 문장을 수행할 수 있다.</p>

        <p>Java External Procedure는 현재 트랜잭션에 포함되어 실행되므로, 사용자가 JDBC로 작성한 함수를
        이용하여 현재 트랜잭션에 질의 또는 DML 등을 수행할 수 있다.</p>

        <p>이러한 기능을 수행하기 위해서는 <span>Tibero</span>에서 제공하는 <span><strong class="guibutton">Internal JDBC Driver</strong></span>를 이용해야
        한다. 자세한 내용은 <a href="chapter_java_extproc_using.html#sect_internal_driver" title="8.2. Internal JDBC Driver">“8.2. Internal JDBC Driver”</a>를 참고한다.<a id="d5e1269" class="indexterm"/></p>

        <p/>
      </li></ul></div>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_java_ep_flow"/>6.2. 동작 과정</h2></div></div></div>
    

    <p>Java External Procedure로 등록한 사용자 Java 클래스는 수행이 요청되는 순간에 동적으로 로드된다. 이
    역할은 서버 프로세스가 아닌 <span><strong class="guibutton">JEPA</strong></span> 프로세스가 담당한다.<a id="d5e1277" class="indexterm"/></p>

    <p>JEPA 프로세스는 설정된 초기화 파라미터에 따라 <span>Tibero</span> 서버가 기동될 때 자동으로 생성되며, 서버 프로세스로부터 사용자 Java 클래스를 호출하기 위한 여러 가지
    정보(클래스 이름, 호출할 함수명, 파라미터 정보 등)를 받는다. 그 다음 JEPA 프로세스는 사용자 Java 클래스를 동적으로
    로드하여 해당 함수를 찾고 사용자가 입력한 파라미터 정보를 통해 함수를 실행시킨다. 만약 반환 값이나 출력 파라미터가 있을 경우
    JEPA 프로세스는 서버 프로세스로 그 값을 전달한다.</p>

    <p>이러한 모든 과정은 <span>Tibero</span>에서 자동으로 처리되므로, 사용자는 기존의 PSM 함수를 사용하는
    것과 같이 애플리케이션 프로그램을 작성할 수 있다.</p>

    <div class="literallayout"><p/></div>

    <p>다음은 Java External Procedure의 동작 과정을 나타내는 그림이다.</p>

    <div class="figure"><a id="figure_extproc_java_concept"/><p class="title"><b>[그림 6.1] Java External Procedure의 동작 과정</b></p><div class="figure-contents">
        

        <div xmlns="" class="mediaobject" align="left"><table border="0" summary="manufactured viewport for HTML img" cellspacing="0" cellpadding="0" width="600"><tr><td align="left"><img src="resources/img_extproc_02.png" align="top" width="600" alt="Java External Procedure의 동작 과정"/></td></tr></table></div>
      </div></div><p><br class="figure-break"/></p>

    <p><a href="chapter_java_extproc.html#figure_extproc_java_concept" title="[그림 6.1] Java External Procedure의 동작 과정">[그림 6.1]</a>를 기준으로 Java External
    Procedure가 동작하는 세부 과정은 다음과 같다.</p>

    <div class="orderedlist"><ol type="1" compact="compact"><li>
        <p>데이터베이스 서버가 기동될 때 JEPA 프로세스가 생성된다.</p>
      </li><li>
        <p>사용자는 자신이 직접 작성한 사용자 Java 클래스(Java 소스: .class)를 데이터베이스에 Java 객체로
        등록한다.</p>
      </li><li>
        <p>PSM 프로그램을 작성하여 2번에서 등록한 Java 객체와 연결한다.</p>
      </li><li>
        <p>3번에서 작성한 PSM 프로그램에서 실행 요청이 발생한 경우 JEPA 프로세스와 연결을 맺는다. 그 다음 함수
        실행을 위한 정보(클래스 이름, 함수 이름, 파라미터 정보 등)를 전달하고, 처리 결과를 기다린다.</p>
      </li><li>
        <p>JEPA 프로세스는 실행할 함수를 찾아 수행하고, 그 결과를 데이터베이스 서버로 보낸다.</p>
      </li><li>
        <p>데이터베이스 서버는 JEPA 프로세스로부터 받은 결과를 분석하여 사용자에게 전송한다.</p>
      </li><li>
        <p>세션이 종료되면 JEPA 프로세스와는 연결이 끊어진다. 그 이후 다음 세션이 연결되고, PSM 프로그램이 호출되면
        다시 JEPA 프로세스와 연결된다.</p>
      </li><li>
        <p>JEPA 프로세스는 데이터베이스 서버가 종료될 때 자동으로 종료된다.</p>
      </li></ol></div>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chapter_extproc_util.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="chapter_java_extproc_create.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제5장 C External Procedure 유틸리티 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 제7장 Java External Procedure 생성</td></tr></table></div><div xmlns="" align="center"/></body></html>