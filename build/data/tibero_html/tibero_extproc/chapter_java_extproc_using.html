<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제8장 Java External Procedure 사용</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero External Procedure 안내서"/><link rel="up" href="index.html" title="Tibero External Procedure 안내서"/><link rel="prev" href="chapter_java_extproc_create.html" title="제7장 Java External Procedure 생성"/><link rel="next" href="idx.html" title="색인"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제8장 Java External Procedure 사용</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="chapter_java_extproc_create.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="idx.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="chapter_java_extproc_using"/>제8장 Java External Procedure 사용</h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="chapter_java_extproc_using.html#d5e1664">8.1. 기본적인 Java 애플리케이션 프로그램</a></span></dt><dd><dl><dt><span class="section"><a href="chapter_java_extproc_using.html#d5e1666">8.1.1. 개발 방법</a></span></dt><dt><span class="section"><a href="chapter_java_extproc_using.html#d5e1676">8.1.2. Java 출력 전송</a></span></dt></dl></dd><dt><span class="section"><a href="chapter_java_extproc_using.html#sect_internal_driver">8.2. Internal JDBC Driver</a></span></dt><dd><dl><dt><span class="section"><a href="chapter_java_extproc_using.html#d5e1691">8.2.1. 데이터베이스 서버와 연결</a></span></dt><dt><span class="section"><a href="chapter_java_extproc_using.html#sect_internal_ex">8.2.2. 사용 예제</a></span></dt></dl></dd></dl></div>
  

  <p>일반적으로 Java를 이용하여 클래스 파일을 생성하고 패키징 과정을 거치면 애플리케이션 프로그램을 개발할 수 있다. 또한
  데이터베이스에 단순히 Java 객체를 생성함으로써 별도의 컴파일 및 패키징 과정 없이 다양한 용도의 애플리케이션 프로그램으로 작성할 수도
  있다.</p>

  <p>본 장에서는 생성된 Java External Procedure를 사용하여 Java 애플리케이션 프로그램을 작성하는 방법을
  설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e1664"/>8.1. 기본적인 Java 애플리케이션 프로그램</h2></div></div></div>
    

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="d5e1666"/>8.1.1. 개발 방법</h3></div></div></div>
      

      <p>사용자는 일반적으로 Java 애플리케이션 프로그램을 개발하는 방법과 마찬가지로 애플리케이션 프로그램을 작성할 수
      있다.<a id="d5e1669" class="indexterm"/> 예를 들면 다음과 같다.</p>

      <pre class="programlisting">SQL&gt; CREATE OR REPLACE AND RESOLVE JAVA SOURCE NAMED "JavaExtproc" AS
     public class SimpleMath {
         public static int findMax(int x, int y) {
             if (x &gt;= y) return x;
             else return y;
         }
     }
     /</pre>

      <div class="caution" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">주의</h3>
        <p>Java 애플리케이션 프로그램을 개발할 때 주의해야 할 두 가지 사항이 있다.</p>

        <p>- 정적(static) 전역 변수를 사용할 수 없으며, 사용할 경우 예상치 못한 오동작이 발생할 수
        있다.</p>

        <p>- 사용자 Java 클래스를 PSM 함수로 대응시키기 위해서는 반드시 정적 함수로 선언해야 한다.</p>
      </div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="d5e1676"/>8.1.2. Java 출력 전송</h3></div></div></div>
      

      <p>사용자는 <span><strong class="guibutton">DBMS_JAVA</strong></span> 패키지를 사용하여 Java 애플리케이션 프로그램의
      출력 내용을 콘솔 화면으로 확인할 수 있다. 예를 들면 다음과 같다.</p>

      <pre class="programlisting">SQL&gt; CREATE OR REPLACE AND RESOLVE Java SOURCE NAMED "JavaExtproc" AS
     public class SimplePrint {
         public static void printMax(int x, int y) {
             if (x &gt;= y) System.out.println("Max="+x);
             else System.out.println("Max="+y);
         }
     }
     /
Java Source 'JavaExtproc' created.

SQL&gt; CREATE OR REPLACE PROCEDURE print_max(x pls_integer, y pls_integer) IS
     LANGUAGE JAVA NAME 'SimplePrint.printMax(int, int)';
     /
Procedure 'PRINT_MAX' created.

SQL&gt; set serveroutput on
SQL&gt; call dbms_java.set_output(2000);

PSM called.

SQL&gt; BEGIN print_max(1, 2); END;
     /
Max=2

PSM completed.

SQL&gt;</pre>

      <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
        <p>DBMS_JAVA 패키지에 대한 자세한 내용은 "<span>Tibero</span> <span>tbPSM</span> 참조 안내서"를 참고한다.</p>
      </div>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="sect_internal_driver"/>8.2. Internal JDBC Driver<a id="d5e1687" class="indexterm"/></h2></div></div></div>
    

    <p>사용자는 JDBC 인터페이스를 이용하여 애플리케이션 프로그램을 개발할 수 있는 것처럼 Java 객체 내부에
    <span><strong class="guibutton">Internal JDBC Driver</strong></span>를 사용할 수 있다. Java External
    Procedure는 새롭게 데이터베이스 서버와 연결하여 통신하는 일반적인 형태의 JDBC 프로그램이 아닌 기존 트랜잭션을 이용할 수
    있는 Internal JDBC Driver를 사용할 수 있다.</p>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="d5e1691"/>8.2.1. 데이터베이스 서버와 연결</h3></div></div></div>
      

      <p>일반적인 JDBC 인터페이스의 연결 과정은 다음과 같다.</p>

      <pre class="programlisting">Connection conn = DriverManager.getConnection("jdbc:<span>tibero</span>:localhost:9999:<span>tibero</span>",
                                              "<span>tibero</span>", "<span>tibero</span>");</pre>

      <div class="literallayout"><p/></div>

      <p>Internal JDBC Driver를 사용하는 방법은 다음과 같다.</p>

      <pre class="programlisting">Connection conn = DriverManager.getConnection("jdbc:default:connection:");</pre>

      <p>기존의 JDBC 인터페이스의 방식을 사용하는 경우에는 현재 트랜잭션에 참여하지 못하고 새로운 세션으로 시작하게 된다.
      그러나 Internal JDBC Driver를 사용하는 경우에는 현재 트랜잭션에 참여하여 아직 커밋되지 않은 내용까지도 커밋하거나
      롤백할 수 있다.</p>

      <p>Internal JDBC Driver를 사용하여 데이터베이스 서버에 연결하고 나면, 일반적인 JDBC 인터페이스를
      사용하는 방식 그대로 사용할 수 있다.</p>

      <p/>

      <p/>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_internal_ex"/>8.2.2. 사용 예제</h3></div></div></div>
      

      <p>다음은 Internal JDBC Driver를 사용하여 Java 애플리케이션 프로그램을 작성한 예이다.</p>

      <pre class="programlisting">CREATE OR REPLACE AND RESOLVE JAVA SOURCE NAMED "TestInternal" as
import java.sql.*;
import java.io.*;

public class POManager
{
   public static void addCustomer (int custNo, String custName, String city) 
   throws SQLException
   {
       String sql = "INSERT INTO Customers VALUES (?,?,?)";
       try
       {
          Connection conn = DriverManager.getConnection("jdbc:default:connection:");
          PreparedStatement pstmt = conn.prepareStatement(sql);
          pstmt.setInt(1, custNo);
          pstmt.setString(2, custName);
          pstmt.setString(3, city);
          pstmt.executeUpdate();
          pstmt.close();
       }
       catch (SQLException e) {
          System.err.println(e.getMessage());
       }
   }
}</pre>
    </div>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="chapter_java_extproc_create.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="idx.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제7장 Java External Procedure 생성 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> 색인</td></tr></table></div><div xmlns="" align="center"/></body></html>