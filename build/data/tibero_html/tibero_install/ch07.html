<?xml version="1.0" encoding="utf-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"><head><meta xmlns="" http-equiv="Content-Type" content="text/html; charset=utf-8"/><title>제7장 TAC 설치와 제거</title><link rel="stylesheet" href="../stylesheet.css" type="text/css"/><meta name="generator" content="DocBook XSL Stylesheets V1.72.0"/><link rel="start" href="index.html" title="Tibero 설치 안내서"/><link rel="up" href="index.html" title="Tibero 설치 안내서"/><link rel="prev" href="ch06.html" title="제6장 멀티 인스턴스 설치와 제거"/><link rel="next" href="appendix_troubleshooting.html" title="Appendix A. 설치 후 문제 해결"/></head><body><div xmlns="" class="navheader"><table width="100%" summary="Navigation header"><tr><td class="navbar-title" colspan="3" align="center">제7장 <span xmlns="http://www.w3.org/1999/xhtml">TAC</span> 설치와 제거</td></tr><tr><td width="20%" align="left"><a accesskey="p" href="ch06.html">이전</a> </td><td class="navbar-title" width="60%" align="center"> </td><td width="20%" align="right"> <a accesskey="n" href="appendix_troubleshooting.html">다음</a></td></tr></table><hr/></div><div class="chapter" lang="ko"><div class="titlepage"><div><div><h2 class="title"><a id="d5e3547"/>제7장 <span>TAC</span> 설치와 제거<a id="d5e3550" class="indexterm"/></h2></div></div></div><div class="toc"><p><b>내용 목차</b></p><dl><dt><span class="section"><a href="ch07.html#d5e3557">7.1. 설치 전 준비사항</a></span></dt><dd><dl><dt><span class="section"><a href="ch07.html#d5e3578">7.1.1. IP 주소 및 포트 정보 확인</a></span></dt><dt><span class="section"><a href="ch07.html#d5e3620">7.1.2. 소켓 버퍼 설정</a></span></dt><dt><span class="section"><a href="ch07.html#sect_sharddisk_type_check">7.1.3. 공유 디스크 타입 확인</a></span></dt></dl></dd><dt><span class="section"><a href="ch07.html#d5e3746">7.2. 수동 설치</a></span></dt><dt><span class="section"><a href="ch07.html#d5e3759">7.3. 설치 확인</a></span></dt><dt><span class="section"><a href="ch07.html#d5e3781">7.4. 제거</a></span></dt></dl></div>
  

  <p>본 절에서는 <span><span>TAC</span>(Tibero</span> Active Cluster) 환경을 구축하기 위한 <span>Tibero</span>의 설치 방법을 설명한다.</p>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e3557"/>7.1. 설치 전 준비사항</h2></div></div></div>
    

    <p>TAC를 구축하기 전에 다음의 사항을 확인한다.</p>

    <div class="itemizedlist"><ul type="disc" compact="compact"><li>
        <p>시스템 요구사항</p>

        <p><span>TAC</span> 설치를 위한 시스템 요구사항의 내용은 <a href="chapter_intro_requirement.html#sect_system_requirements" title="1.3. 시스템 요구 사항">“1.3. 시스템 요구 사항”</a>을 참고한다.</p>
      </li><li>
        <p>설치 전 준비사항</p>

        <p><span>TAC</span>를 구성 전 <a href="chapter_preinstall.html" title="제2장 설치 전 준비사항">“제2장 설치 전 준비사항”</a>을 참고하여 기본적인 사항을 점검한다.</p>
      </li><li>
        <p>IP 주소 및 포트 정보 확인</p>
      </li><li>
        <p>소켓 버퍼 설정</p>
      </li><li>
        <p>공유 디스크 타입 확인</p>
      </li></ul></div>

    <p/>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="d5e3578"/>7.1.1. IP 주소 및 포트 정보 확인</h3></div></div></div>
      

      <p>설치를 시작하기 전에 IP 주소와 포트 번호를 확인한다. 기존 <span>Tibero</span> 단일 인스턴스에서 필요로 하는 IP 주소(외부 IP 주소)와 Listener 포트 번호 외에 추가로
      Interconnect IP 주소와 포트 번호, CM 포트 번호가 필요하다. VIP, IP 필터링 기능을 사용하는 경우 동일
      서브넷에 IP가 부여되어 있는지 확인이 필요하다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>IP 주소</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">구분</th><th>설명</th></tr></thead><tbody><tr><td align="left">외부 IP 주소</td><td>외부 통신을 위해 부여될 IP 주소를 확인한다.</td></tr><tr><td align="left">Interconnect IP 주소</td><td>각 노드간 통신을 위해 부여될 내부 IP 주소를 확인한다.</td></tr></tbody></table>
          </div>
        </li><li>
          <p>포트 번호</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="150" align="left"/><col/></colgroup><thead><tr><th align="left">구분</th><th>설명</th></tr></thead><tbody><tr><td align="left">Listener 포트 번호</td><td>각 노드의 <span>Tibero</span> 인스턴스를 기동할 때 부여될 포트 번호를
                  확인한다.</td></tr><tr><td align="left">CM 포트 번호</td><td>각 노드의 통신을 위한 CM에 부여될 포트 번호를 확인한다.</td></tr><tr><td align="left">Interconnect 포트 번호</td><td>각 노드의 <span>Tibero</span> 인스턴스간에 통신할 포트 번호를
                  확인한다.</td></tr></tbody></table>
          </div>
        </li></ul></div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="d5e3620"/>7.1.2. 소켓 버퍼 설정</h3></div></div></div>
      

      <p>운영체제의 소켓 버퍼 값을 설정한다.</p>

      <div class="itemizedlist"><ul type="disc" compact="compact"><li>
          <p>AIX</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>권장 값</th></tr></thead><tbody><tr><td align="left">SB_MAX</td><td>4194304</td></tr><tr><td align="left">TCP_RECVSPACE</td><td>4194304</td></tr><tr><td align="left">TCP_SENDSPACE</td><td>1048576</td></tr></tbody></table>
          </div>
        </li><li>
          <p>Linux</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>권장 값</th></tr></thead><tbody><tr><td align="left">net.core.rmem_max</td><td>4194304</td></tr><tr><td align="left">net.ipv4.tcp_rmem</td><td>4194304</td></tr><tr><td align="left">net.ipv4.tcp_wmem</td><td>1048576</td></tr></tbody></table>
          </div>
        </li><li>
          <p>Solaris</p>

          <div class="informaltable">
            <table border="1"><colgroup><col width="180" align="left"/><col/></colgroup><thead><tr><th align="left">파라미터</th><th>권장 값</th></tr></thead><tbody><tr><td align="left">max_buf</td><td>4194304</td></tr><tr><td align="left">recv_buf</td><td>4194304</td></tr><tr><td align="left">send_buf</td><td>1048576</td></tr></tbody></table>
          </div>
        </li></ul></div>

      <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
        <p>sb_max 파라미터는 AIX 운영체제에만 해당한다.</p>
      </div>
    </div>

    <div class="section" lang="ko"><div class="titlepage"><div><div><h3 class="title"><a id="sect_sharddisk_type_check"/>7.1.3. 공유 디스크 타입 확인</h3></div></div></div>
      

      <p><span>TAC</span>는 모든 인스턴스가 같이 사용할 수 있는 공유 디스크의 공간을 필요로
      한다.</p>

      <p><span>TAC</span>의 실행과 운영을 위해서는 최소 7개의 공유 파일이 필요하다. 파일의 위치는
      설치할 때 사용자에게 입력받는 {SHARED_DISK_HOME}을 기준으로 생성되며 노드마다 필요로 하는 파일은 {<span>TAC</span>_INSTANCE_ID}를 붙여서 생성한다. 예를 들어
      {SHARED_DISK_HOME}이 dev/<span>tac</span>이고 {<span>TAC</span>_INSTANCE_ID}가 0일 경우 Undo 로그 파일의 경로는
      'dev/<span>tac</span>/UNDO0.dtf'이다.</p>

      <p>다음은 처음 노드를 설치할 때 필요한 공유 파일의 목록과 파일 생성 경로이다.</p>

      <div class="informaltable">
          <table border="1"><colgroup><col width="200" align="left"/><col/></colgroup><thead><tr><th align="left">파일</th><th>경로</th></tr></thead><tbody><tr><td align="left">컨트롤 파일</td><td>{SHARED_DISK_HOME}/c1.ctl(변경 가능)</td></tr><tr><td align="left">CM용 클러스터 파일</td><td>{SHARED_DISK_HOME}/cfile/cls1_cfile(변경 가능)</td></tr><tr><td align="left">Redo 로그 파일</td><td><p>{SHARED_DISK_HOME}/log{<span>TAC</span>_INSTANCE_ID}1.log</p><p>{SHARED_DISK_HOME}/log{<span>TAC</span>_INSTANCE_ID}2.log</p><p>{SHARED_DISK_HOME}/log{<span>TAC</span>_INSTANCE_ID}3.log</p></td></tr><tr><td align="left">Undo 로그 파일</td><td>{SHARED_DISK_HOME}/UNDO{<span>TAC</span>_INSTANCE_ID}.dtf</td></tr><tr><td align="left">사용자 테이블 스페이스 파일</td><td>{SHARED_DISK_HOME}/usr001.dtf</td></tr><tr><td align="left">시스템 테이블 스페이스 파일</td><td>{SHARED_DISK_HOME}/system001.dtf</td></tr><tr><td align="left">임시 테이블 스페이스 파일</td><td>{SHARED_DISK_HOME}/temp001.dtf</td></tr></tbody></table>
        </div>

      <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
        <p>하드웨어 특성상 위의 설정 대로 파일명을 사용할 수 없는 경우는 Symbolic Link를 활용한다.</p>
      </div>

      <div class="literallayout"><p/></div>

      <p>처음 노드 설치 이후 추가적으로 노드를 설치하기 위해 각 노드당 4개의 공유 파일이 요구된다. 각 파일의 경로는 위의
      표를 참고한다.</p>

      <div class="itemizedlist"><ul type="circle" compact="compact"><li style="list-style-type: circle">
            <p>Redo 로그 파일 3개</p>
          </li><li style="list-style-type: circle">
            <p>Undo 로그 파일</p>
          </li></ul></div>

      <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
        <p>1. 공유 디스크로 Raw Device를 사용할 경우 위의 각 공유 파일들은 하나의 Raw Device 파일에
        해당하며 설치하기 전에 미리 Raw Device 관리자에게 해당 파일을 생성해 줄 것을 요청해야 한다. 단, 각 파일의 크기는
        충분해야 하고 Block Size는 512로 맞추어져 있어야 하며 Charater Type으로 설정해야 한다.</p>

        <p>2. 컨트롤 파일, CM용 클러스터 파일과 리소스 파일의 경우 사용자가 원하는 경로와 파일 이름으로 설정할 수
        있다.</p>
      </div>

      <p/>

      <p/>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e3746"/>7.2. 수동 설치<a id="d5e3748" class="indexterm"/></h2></div></div></div>
    

    <p>수동으로 <span>TAC</span> 환경을 구축하고 <span>Tibero</span>를 설치하는 방법은 "<span>Tibero</span>
    관리자 안내서"의 "9장 <span>Tibero</span> Cluster Manager"와 "10장 <span>Tibero</span> Active Cluster"를 참조한다.</p>

    <p/>

    <p/>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e3759"/>7.3. 설치 확인<a id="d5e3761" class="indexterm"/><a id="d5e3764" class="indexterm"/></h2></div></div></div>
    

    <p>설치 후 정상 작동 여부 확인은 <span><strong class="guibutton"><span>tbcm</span></strong></span> 명령어을 이용하여 수행할 수 있다.</p>

    <pre class="programlisting"><span>tbcm</span> -s </pre>

    <p>실행 후 나타나는 화면을 통하여 CM의 설정상태를 확인할 수 있다.</p>

    <pre class="programlisting">CM information
===============================================================
CM NAME             : cm0
CM UI PORT          : 8635
RESOURCE FILE PATH  : /home/<span>tibero</span>7/cm0_res.crf
CM MODE             : GUARD ON, FENCE OFF
LOG LEVEL           : 2
===============================================================</pre>

    <div class="note" style="margin-left: 0in; margin-right: 0in;"><h3 class="title">참고</h3>
      <p><span>tbcm</span> 명령의 자세한 사용법은 "<span>Tibero</span> 관리자 안내서"의 "9장 <span>Tibero</span> Cluster Manager"를 참고한다.</p>
    </div>
  </div>

  <div class="section" lang="ko"><div class="titlepage"><div><div><h2 class="title" style="clear: both"><a id="d5e3781"/>7.4. 제거<a id="d5e3783" class="indexterm"/></h2></div></div></div>
    

    <p><span>TAC</span> 환경에서 한 노드를 제거하기 위한 방법에는 <span><strong class="guibutton">콘솔
    모드</strong></span>와 <span><strong class="guibutton">수동 모드</strong></span>가 있다.</p>

    <p/>

    <h3><a id="d5e3792"/>콘솔 모드</h3>

    <p>콘솔 모드로 하나의 노드를 제거하는 순서는 다음과 같다.</p>

    <div class="orderedlist"><ol type="1"><li>
        <p><span>Tibero</span> 인스턴스를 종료한다.</p>

        <pre class="programlisting"><span>tbdown</span> </pre>
      </li><li>
        <p><span>TBCM</span>을 종료한다.</p>

        <pre class="programlisting"><span>tbcm</span> -d</pre>
      </li><li>
        <p><span>Tibero</span>가 설치된 디렉터리를 포함한 모든 하위 디렉터리를 해당 운영체제의
        명령어로 삭제한다.</p>

        <pre class="programlisting">$ rm –rf $<span>TB_HOME</span></pre>
      </li></ol></div>

    <p/>

    <h3><a id="d5e3812"/>수동 모드</h3>

    <p>수동 모드로 하나의 노드를 제거하는 순서는 다음과 같다.</p>

    <div class="orderedlist"><ol type="1"><li>
        <p><span>Tibero</span> 인스턴스를 종료한다.</p>

        <pre class="programlisting"><span>tbdown</span> </pre>
      </li><li>
        <p><span>TBCM</span>을 종료한다.</p>

        <pre class="programlisting"><span>tbcm</span> -d</pre>
      </li><li>
        <p><span>Tibero</span> 인스턴스가 설치된 디렉터리를 포함한 모든 하위 디렉터리를
        삭제한다.</p>

        <pre class="programlisting">rm –rf $<span>TB_HOME</span></pre>
      </li></ol></div>

    <p/>
  </div>
</div><div class="navfooter"><hr/><table width="100%" summary="Navigation footer"><tr><td width="40%" align="left"><a accesskey="p" href="ch06.html">이전</a> </td><td width="20%" align="center"> </td><td width="40%" align="right"> <a accesskey="n" href="appendix_troubleshooting.html">다음</a></td></tr><tr><td width="40%" align="left" valign="top">제6장 멀티 인스턴스 설치와 제거 </td><td width="20%" align="center"><a accesskey="h" href="index.html">처음으로</a></td><td width="40%" align="right" valign="top"> Appendix A. 설치 후 문제 해결</td></tr></table></div><div xmlns="" align="center"/></body></html>